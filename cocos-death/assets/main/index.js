System.register("chunks:///_virtual/IronSkeletonManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./EnemyManager.ts","./IronSkeletonStateMachine.ts"],(function(n){"use strict";var e,t,r,o,a,i;return{setters:[function(n){e=n.inheritsLoose,t=n.asyncToGenerator},function(n){r=n.cclegacy,o=n._decorator},function(n){a=n.EnemyManager},function(n){i=n.IronSkeletonStateMachine}],execute:function(){var s;r._RF.push({},"02a45asaOtAKZAxKwe/CZnq","IronSkeletonManager",void 0);var c=o.ccclass;n("IronSkeletonManager",c("IronSkeletonManager")(s=function(n){function r(){return n.apply(this,arguments)||this}return e(r,n),r.prototype.init=function(){var e=t(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.fsm=this.addComponent(i),e.next=3,this.fsm.init();case 3:n.prototype.init.call(this,t);case 4:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}(),r}(a))||s);r._RF.pop()}}}));

System.register("chunks:///_virtual/SpikesSubStateMachine.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./index3.ts","./SubStateMachine.ts"],(function(t){"use strict";var e,n,i,u,s;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){i=t.PARAMS_NAME_ENUM,u=t.SPIKES_COUNT_MAP_NUMBER_ENUM},function(t){s=t.default}],execute:function(){n._RF.push({},"032f1gC8HNPAawJORmBFCmT","SpikesSubStateMachine",void 0);t("default",function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n.prototype.run=function(){var t=this.fsm.params.get(i.SPIKES_CUR_COUNT).value;this.currentState=this.stateMachines.get(u[t])},n}(s));n._RF.pop()}}}));

System.register("chunks:///_virtual/IdleSubStateMachine.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./index3.ts","./DirectionSubStateMachine.ts","./State.ts"],(function(t){"use strict";var e,n,o,i,s,a;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t.AnimationClip},function(t){i=t.DIRECTION_ENUM},function(t){s=t.default},function(t){a=t.default}],execute:function(){n._RF.push({},"0449atsP6hAE7SDWlRAX/ZB","IdleSubStateMachine",void 0);var c="texture/woodenskeleton/idle";t("default",function(t){function n(e){var n;return(n=t.call(this,e)||this).stateMachines.set(i.TOP,new a(e,c+"/top",o.WrapMode.Loop)),n.stateMachines.set(i.BOTTOM,new a(e,c+"/bottom",o.WrapMode.Loop)),n.stateMachines.set(i.LEFT,new a(e,c+"/left",o.WrapMode.Loop)),n.stateMachines.set(i.RIGHT,new a(e,c+"/right",o.WrapMode.Loop)),n}return e(n,t),n}(s));n._RF.pop()}}}));

System.register("chunks:///_virtual/DrawManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,i,s,a,n,o,r,h,l,c,u,d;return{setters:[function(t){e=t.inheritsLoose,i=t.defineProperty,s=t.assertThisInitialized},function(t){a=t.cclegacy,n=t._decorator,o=t.view,r=t.BlockInputEvents,h=t.Graphics,l=t.UITransform,c=t.Color,u=t.game,d=t.Component}],execute:function(){var f;a._RF.push({},"04a60HHO5ZMzLjkjKsySgla","DrawManager",void 0);var p,v=n.ccclass,A=o.getVisibleSize().width,D=o.getVisibleSize().height,m=t("DEFAULT_FADE_DURATION",200);!function(t){t[t.IDLE=0]="IDLE",t[t.FADE_IN=1]="FADE_IN",t[t.FADE_OUT=2]="FADE_OUT"}(p||(p={}));t("DrawManager",v("DrawManager")(f=function(t){function a(){for(var e,a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n))||this,i(s(e),"oldTime",0),i(s(e),"duration",m),i(s(e),"fadeStatus",p.IDLE),i(s(e),"fadeResolve",void 0),i(s(e),"faderNode",void 0),i(s(e),"ctx",void 0),i(s(e),"block",void 0),e}e(a,t);var n=a.prototype;return n.init=function(){this.block=this.addComponent(r),this.ctx=this.addComponent(h);var t=this.getComponent(l);t.setAnchorPoint(.5,.5),t.setContentSize(A,D),this.setAlpha(1)},n.setAlpha=function(t){this.ctx.clear(),this.ctx.rect(0,0,A,D),this.ctx.fillColor=new c(0,0,0,255*t),this.ctx.fill(),this.block.enabled=1===t},n.update=function(){var t=(u.totalTime-this.oldTime)/this.duration;switch(this.fadeStatus){case p.FADE_IN:t<1?this.setAlpha(t):(this.fadeStatus=p.IDLE,this.setAlpha(1),this.fadeResolve(null));break;case p.FADE_OUT:t<1?this.setAlpha(1-t):(this.fadeStatus=p.IDLE,this.setAlpha(0),this.fadeResolve(null))}},n.fadeIn=function(t){var e=this;return void 0===t&&(t=m),this.setAlpha(0),this.duration=t,this.fadeStatus=p.FADE_IN,this.oldTime=u.totalTime,new Promise((function(t){e.fadeResolve=t}))},n.fadeOut=function(t){var e=this;return void 0===t&&(t=m),this.setAlpha(1),this.duration=t,this.fadeStatus=p.FADE_OUT,this.oldTime=u.totalTime,new Promise((function(t){e.fadeResolve=t}))},n.mask=function(){return this.setAlpha(1),new Promise((function(t){setTimeout(t,m)}))},a}(d))||f);a._RF.pop()}}}));

System.register("chunks:///_virtual/level1.ts",["cc","./index3.ts"],(function(L){"use strict";var O,e,t,s,c;return{setters:[function(L){O=L.cclegacy},function(L){e=L.TILE_TYPE_ENUM,t=L.DIRECTION_ENUM,s=L.ENTITY_STATE_ENUM,c=L.ENTITY_TYPE_ENUM}],execute:function(){O._RF.push({},"0d00dfbcr5MtJxeqoIV/i8K","level1",void 0);var r=[[{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:16,type:e.WALL_LEFT_TOP},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:13,type:e.WALL_LEFT_BOTTOM},{src:18,type:e.CLIFF_LEFT}],[{src:16,type:e.WALL_LEFT_TOP},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:14,type:e.WALL_RIGHT_BOTTOM},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:21,type:e.WALL_RIGHT_BOTTOM},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:16,type:e.WALL_LEFT_TOP},{src:13,type:e.WALL_LEFT_BOTTOM},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:20,type:e.WALL_LEFT_BOTTOM},{src:17,type:e.CLIFF_CENTER}],[{src:15,type:e.WALL_RIGHT_TOP},{src:13,type:e.WALL_LEFT_BOTTOM},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:15,type:e.WALL_RIGHT_TOP},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:14,type:e.WALL_RIGHT_BOTTOM},{src:19,type:e.CLIFF_RIGHT}],[{src:null,type:null},{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:16,type:e.WALL_LEFT_TOP},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:13,type:e.WALL_LEFT_BOTTOM},{src:18,type:e.CLIFF_LEFT}],[{src:16,type:e.WALL_LEFT_TOP},{src:14,type:e.WALL_RIGHT_BOTTOM},{src:1,type:e.FLOOR},{src:15,type:e.WALL_RIGHT_TOP},{src:14,type:e.WALL_RIGHT_BOTTOM},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:21,type:e.WALL_RIGHT_BOTTOM},{src:19,type:e.CLIFF_RIGHT}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:16,type:e.WALL_LEFT_TOP},{src:13,type:e.WALL_LEFT_BOTTOM},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:20,type:e.WALL_LEFT_BOTTOM},{src:17,type:e.CLIFF_CENTER}],[{src:15,type:e.WALL_RIGHT_TOP},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:14,type:e.WALL_RIGHT_BOTTOM},{src:15,type:e.WALL_RIGHT_TOP},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:14,type:e.WALL_RIGHT_BOTTOM},{src:19,type:e.CLIFF_RIGHT}]],p={x:2,y:8,direction:t.TOP,state:s.IDLE,type:c.PLAYER},y=[{x:7,y:6,direction:t.TOP,state:s.IDLE,type:c.SKELETON_WOODEN}],_={x:7,y:8,direction:t.BOTTOM,state:s.IDLE,type:c.DOOR};L("default",{mapInfo:r,player:p,enemies:y,spikes:[],bursts:[],door:_});O._RF.pop()}}}));

System.register("chunks:///_virtual/level5.ts",["cc","./index3.ts"],(function(e){"use strict";var t,L,s,c,r;return{setters:[function(e){t=e.cclegacy},function(e){L=e.TILE_TYPE_ENUM,s=e.DIRECTION_ENUM,c=e.ENTITY_STATE_ENUM,r=e.ENTITY_TYPE_ENUM}],execute:function(){t._RF.push({},"1573c89uDVMlqUBHIfnrI/B","level5",void 0);var p=[[{src:16,type:L.WALL_LEFT_TOP},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:23,type:L.WALL_LEFT_BOTTOM},{src:18,type:L.CLIFF_LEFT}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:20,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:21,type:L.WALL_RIGHT_BOTTOM},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:21,type:L.WALL_ROW},{src:19,type:L.CLIFF_RIGHT}]],y={x:1,y:3,direction:s.TOP,state:c.IDLE,type:r.PLAYER},E=[{x:5,y:1,direction:s.LEFT,state:c.IDLE,type:r.SKELETON_WOODEN}],_={x:6,y:1,direction:s.LEFT,state:c.IDLE,type:r.DOOR};e("default",{mapInfo:p,player:y,enemies:E,spikes:[],bursts:[],door:_});t._RF.pop()}}}));

System.register("chunks:///_virtual/BattleManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./index3.ts","./DataManager.ts","./EventManager.ts","./TileManager.ts","./index.ts","./IronSkeletonManager.ts","./index2.ts","./WoodenSkeletonManager.ts","./PlayerManager.ts","./TileMapManager.ts","./DoorManager.ts","./BurstManager.ts","./SpikesManager.ts","./FaderManager.ts","./SmokeManager.ts","./ShakeManager.ts"],(function(e){"use strict";var t,n,r,a,s,i,o,c,u,l,p,h,f,d,I,g,y,m,v,E,x,k,L,M,T,R,S,_;return{setters:[function(e){t=e.inheritsLoose,n=e.defineProperty,r=e.assertThisInitialized,a=e.asyncToGenerator},function(e){s=e.cclegacy,i=e._decorator,o=e.director,c=e.Component},function(e){u=e.SCENE_ENUM,l=e.EVENT_ENUM,p=e.ENTITY_STATE_ENUM,h=e.ENTITY_TYPE_ENUM},function(e){f=e.default},function(e){d=e.default},function(e){I=e.TILE_WIDTH,g=e.TILE_HEIGHT},function(e){y=e.createUINode},function(e){m=e.IronSkeletonManager},function(e){v=e.default},function(e){E=e.WoodenSkeletonManager},function(e){x=e.PlayerManager},function(e){k=e.TileMapManager},function(e){L=e.DoorManager},function(e){M=e.BurstManager},function(e){T=e.default},function(e){R=e.default},function(e){S=e.SmokeManager},function(e){_=e.ShakeManager}],execute:function(){var P,w;s._RF.push({},"17d5aEnquFEpbWki0tR0Fap","BattleManager",void 0);var C=i.ccclass;(null===(P=window)||void 0===P?void 0:P.vConsole)&&(window.vConsole.$dom.style.display="none");e("BattleManager",C("BattleManager")(w=function(e){function s(){for(var t,a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return t=e.call.apply(e,[this].concat(s))||this,n(r(t),"level",void 0),n(r(t),"stage",null),n(r(t),"smokeLayer",null),n(r(t),"hasInited",!1),t}t(s,e);var i=s.prototype;return i.onLoad=function(){o.preloadScene(u.Start),f.Instance.levelIndex=1,d.Instance.on(l.RESTART_LEVEL,this.initLevel,this),d.Instance.on(l.NEXT_LEVEL,this.nextLevel,this),d.Instance.on(l.PLAYER_MOVE_END,this.checkArrived,this),d.Instance.on(l.SHOW_SMOKE,this.generateSmoke,this),d.Instance.on(l.RECORD_STEP,this.record,this),d.Instance.on(l.REVOKE_STEP,this.revoke,this),d.Instance.on(l.QUIT_BATTLE,this.quitBattle,this)},i.onDestroy=function(){d.Instance.off(l.RESTART_LEVEL,this.initLevel),d.Instance.off(l.NEXT_LEVEL,this.nextLevel),d.Instance.off(l.PLAYER_MOVE_END,this.checkArrived),d.Instance.off(l.SHOW_SMOKE,this.generateSmoke),d.Instance.off(l.RECORD_STEP,this.record),d.Instance.off(l.REVOKE_STEP,this.revoke),d.Instance.off(l.QUIT_BATTLE,this.quitBattle),d.Instance.clear()},i.start=function(){this.generateStage(),this.initLevel()},i.initLevel=function(){var e=a(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=v["level"+f.Instance.levelIndex])){e.next=23;break}if(!this.hasInited){e.next=7;break}return e.next=5,R.Instance.fadeIn();case 5:e.next=9;break;case 7:return e.next=9,R.Instance.mask();case 9:return this.clearLevel(),this.level=t,f.Instance.mapInfo=this.level.mapInfo,f.Instance.mapRowCount=this.level.mapInfo.length||0,f.Instance.mapColumnCount=(null===(n=this.level.mapInfo[0])||void 0===n?void 0:n.length)||0,e.next=16,Promise.all([this.generateTileMap(),this.generateBursts(),this.generateSpikes(),this.generateSmokeLayer(),this.generateDoor(),this.generateEnemies()]);case 16:return e.next=18,this.generatePlayer();case 18:return e.next=20,R.Instance.fadeOut();case 20:this.hasInited=!0,e.next=24;break;case 23:this.quitBattle();case 24:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.quitBattle=function(){this.node.destroy(),o.loadScene(u.Start)},i.clearLevel=function(){this.stage.destroyAllChildren(),f.Instance.reset()},i.generateStage=function(){this.stage=y(),this.stage.setParent(this.node),this.stage.setSiblingIndex(2),this.stage.addComponent(_)},i.generateTileMap=function(){var e=a(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=y()).setParent(this.stage),n=t.addComponent(k),e.next=5,n.init();case 5:this.adaptMapPos();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.adaptMapPos=function(){var e=f.Instance,t=e.mapRowCount,n=e.mapColumnCount,r=I*t/2,a=g*n/2+80;this.stage.getComponent(_).stop(),this.stage.setPosition(-r,a)},i.generatePlayer=function(){var e=a(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=y()).setParent(this.stage),n=t.addComponent(x),e.next=5,n.init(this.level.player);case 5:f.Instance.player=n,d.Instance.emit(l.PLAYER_BORN,!0);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.generateEnemies=function(){var e=a(regeneratorRuntime.mark((function e(){var t,n,r,a,s,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(f.Instance.enemies=[],t=[],n=0;n<this.level.enemies.length;n++)r=this.level.enemies[n],(a=y()).setParent(this.stage),s=r.type===h.SKELETON_WOODEN?E:m,i=a.addComponent(s),t.push(i.init(r)),f.Instance.enemies.push(i);return e.next=5,Promise.all(t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.generateBursts=function(){var e=a(regeneratorRuntime.mark((function e(){var t,n,r,a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=[],n=0;n<this.level.bursts.length;n++)r=this.level.bursts[n],(a=y()).setParent(this.stage),s=a.addComponent(M),t.push(s.init(r)),f.Instance.bursts.push(s);return e.next=4,Promise.all(t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.generateSpikes=function(){var e=a(regeneratorRuntime.mark((function e(){var t,n,r,a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=[],n=0;n<this.level.spikes.length;n++)r=this.level.spikes[n],(a=y()).setParent(this.stage),s=a.addComponent(T),t.push(s.init(r)),f.Instance.spikes.push(s);return e.next=4,Promise.all(t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.generateDoor=function(){var e=a(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=y()).setParent(this.stage),n=t.addComponent(L),e.next=5,n.init(this.level.door);case 5:f.Instance.door=n;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.generateSmoke=function(){var e=a(regeneratorRuntime.mark((function e(t,n,r){var a,s,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=f.Instance.smokes.find((function(e){return e.state===p.DEATH})))){e.next=9;break}a.x=t,a.y=n,a.node.setPosition(a.x*I-1.5*I,-a.y*g+1.5*g),a.direction=r,a.state=p.IDLE,e.next=15;break;case 9:return(s=y()).setParent(this.smokeLayer),i=s.addComponent(S),e.next=14,i.init({x:t,y:n,direction:r,state:p.IDLE,type:h.SMOKE});case 14:f.Instance.smokes.push(i);case 15:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),i.generateSmokeLayer=function(){var e=a(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.smokeLayer=y(),this.smokeLayer.setParent(this.stage);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.nextLevel=function(){f.Instance.levelIndex++,this.initLevel()},i.checkArrived=function(){var e=f.Instance.door,t=e.x,n=e.y,r=e.state,a=f.Instance.player,s=a.x,i=a.y;t===s&&n===i&&r===p.DEATH&&d.Instance.emit(l.NEXT_LEVEL)},i.record=function(){var e={player:{x:f.Instance.player.targetX,y:f.Instance.player.targetY,state:f.Instance.player.state===p.IDLE||f.Instance.player.state===p.DEATH||f.Instance.player.state===p.AIRDEATH?f.Instance.player.state:p.IDLE,direction:f.Instance.player.direction,type:f.Instance.player.type},door:{x:f.Instance.door.x,y:f.Instance.door.y,state:f.Instance.door.state,direction:f.Instance.door.direction,type:f.Instance.door.type},enemies:f.Instance.enemies.map((function(e){return{x:e.x,y:e.y,state:e.state,direction:e.direction,type:e.type}})),spikes:f.Instance.spikes.map((function(e){return{x:e.x,y:e.y,count:e.count,type:e.type}})),bursts:f.Instance.bursts.map((function(e){return{x:e.x,y:e.y,state:e.state,direction:e.direction,type:e.type}}))};f.Instance.records.push(e)},i.revoke=function(){var e=f.Instance.records.pop();if(e){f.Instance.player.x=f.Instance.player.targetX=e.player.x,f.Instance.player.y=f.Instance.player.targetY=e.player.y,f.Instance.player.state=e.player.state,f.Instance.player.direction=e.player.direction;for(var t=0;t<e.enemies.length;t++){var n=e.enemies[t];f.Instance.enemies[t].x=n.x,f.Instance.enemies[t].y=n.y,f.Instance.enemies[t].state=n.state,f.Instance.enemies[t].direction=n.direction}for(var r=0;r<e.spikes.length;r++){var a=e.spikes[r];f.Instance.spikes[r].x=a.x,f.Instance.spikes[r].y=a.y,f.Instance.spikes[r].count=a.count}for(var s=0;s<e.bursts.length;s++){var i=e.bursts[s];f.Instance.bursts[s].x=i.x,f.Instance.bursts[s].y=i.y,f.Instance.bursts[s].state=i.state}f.Instance.door.x=e.door.x,f.Instance.door.y=e.door.y,f.Instance.door.state=e.door.state,f.Instance.door.direction=e.door.direction}},s}(c))||w);s._RF.pop()}}}));

System.register("chunks:///_virtual/SpikesFourSubStateMachine.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./index3.ts","./State.ts","./SpikesSubStateMachine.ts"],(function(e){"use strict";var t,s,n,i,a;return{setters:[function(e){t=e.inheritsLoose},function(e){s=e.cclegacy},function(e){n=e.SPIKES_COUNT_ENUM},function(e){i=e.default},function(e){a=e.default}],execute:function(){s._RF.push({},"1a656Wl6thKsaHfvJNDKrED","SpikesFourSubStateMachine",void 0);var u="texture/spikes/spikesfour";e("default",function(e){function s(t){var s;return(s=e.call(this,t)||this).stateMachines.set(n.ZERO,new i(t,u+"/zero")),s.stateMachines.set(n.ONE,new i(t,u+"/one")),s.stateMachines.set(n.TWO,new i(t,u+"/two")),s.stateMachines.set(n.THREE,new i(t,u+"/three")),s.stateMachines.set(n.FOUR,new i(t,u+"/four")),s.stateMachines.set(n.FIVE,new i(t,u+"/five")),s}return t(s,e),s}(a));s._RF.pop()}}}));

System.register("chunks:///_virtual/BlockBackSubStateMachine.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./index3.ts","./DirectionSubStateMachine.ts","./State.ts"],(function(t){"use strict";var e,n,c,a,s;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){c=t.DIRECTION_ENUM},function(t){a=t.default},function(t){s=t.default}],execute:function(){n._RF.push({},"1ada5KTd7xMdr2DDlq4nefC","BlockBackSubStateMachine",void 0);var i="texture/player/blockback";t("default",function(t){function n(e){var n;return(n=t.call(this,e)||this).stateMachines.set(c.TOP,new s(e,i+"/top")),n.stateMachines.set(c.BOTTOM,new s(e,i+"/bottom")),n.stateMachines.set(c.LEFT,new s(e,i+"/left")),n.stateMachines.set(c.RIGHT,new s(e,i+"/right")),n}return e(n,t),n}(a));n._RF.pop()}}}));

System.register("chunks:///_virtual/State.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./index.ts","./ResourceManager.ts"],(function(t){"use strict";var i,n,e,a,r,o,s,p,u,m;return{setters:[function(t){i=t.defineProperty,n=t.asyncToGenerator,e=t.createForOfIteratorHelperLoose},function(t){a=t.cclegacy,r=t.AnimationClip,o=t.animation,s=t.Sprite,p=t.SpriteFrame},function(t){u=t.sortSpriteFrame},function(t){m=t.ResourceManager}],execute:function(){a._RF.push({},"1d3b7qcDy1IGqr7nwT4iZm3","State",void 0);var c=t("ANIMATION_SPEED",1/8);t("default",function(){function t(t,n,e,a,o){void 0===e&&(e=r.WrapMode.Normal),void 0===a&&(a=c),void 0===o&&(o=[]),i(this,"animationClip",void 0),this.fsm=t,this.spriteFrameDir=n,this.wrapMode=e,this.speed=a,this.events=o,this.init()}var a=t.prototype;return a.init=function(){var t=n(regeneratorRuntime.mark((function t(){var i,n,a,c,h,l,d,f=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(i=new o.ObjectTrack).path=(new o.TrackPath).toComponent(s).toProperty("spriteFrame"),n=m.Instance.loadDir(this.spriteFrameDir,p),this.fsm.waitingList.push(n),t.next=6,n;case 6:for(a=t.sent,c=u(a).map((function(t,i){return[i*f.speed,t]})),i.channel.curve.assignSorted(c),this.animationClip=new r,this.animationClip.name=this.spriteFrameDir,this.animationClip.duration=c.length*this.speed,this.animationClip.addTrack(i),this.animationClip.wrapMode=this.wrapMode,h=e(this.events);!(l=h()).done;)d=l.value,this.animationClip.events.push(d);this.animationClip.updateEventDatas();case 16:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),a.run=function(){var t;(null===(t=this.fsm.animationComponent.defaultClip)||void 0===t?void 0:t.name)!==this.animationClip.name&&(this.fsm.animationComponent.defaultClip=this.animationClip,this.fsm.animationComponent.play())},t}());a._RF.pop()}}}));

System.register("chunks:///_virtual/SmokeStateMachine.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./index3.ts","./EntityManager.ts","./StateMachine.ts","./DeathSubStateMachine4.ts","./IdleSubStateMachine5.ts"],(function(t){"use strict";var e,n,i,a,s,r,c,o,u,h,m,f,p;return{setters:[function(t){e=t.inheritsLoose,n=t.asyncToGenerator},function(t){i=t.cclegacy,a=t._decorator,s=t.Animation},function(t){r=t.ENTITY_STATE_ENUM,c=t.PARAMS_NAME_ENUM},function(t){o=t.EntityManager},function(t){u=t.getInitParamsTrigger,h=t.getInitParamsNumber,m=t.default},function(t){f=t.default},function(t){p=t.default}],execute:function(){var S;i._RF.push({},"1e09dbWc8NLMInVzRcnLZyh","SmokeStateMachine",void 0);var E=a.ccclass;t("SmokeStateMachine",E("SmokeStateMachine")(S=function(t){function i(){return t.apply(this,arguments)||this}e(i,t);var a=i.prototype;return a.init=function(){var t=n(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.animationComponent=this.node.addComponent(s),this.initParams(),this.initStateMachines(),this.initAnimationEvent(),t.next=6,Promise.all(this.waitingList);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),a.initAnimationEvent=function(){var t=this;this.animationComponent.on(s.EventType.FINISHED,(function(){var e=t.animationComponent.defaultClip.name;["idle"].some((function(t){return e.includes(t)}))&&(t.node.getComponent(o).state=r.DEATH)}))},a.initParams=function(){this.params.set(c.IDLE,u()),this.params.set(c.DEATH,u()),this.params.set(c.DIRECTION,h())},a.initStateMachines=function(){this.stateMachines.set(c.IDLE,new p(this)),this.stateMachines.set(c.DEATH,new f(this))},a.run=function(){switch(this.currentState){case this.stateMachines.get(c.DEATH):case this.stateMachines.get(c.IDLE):this.params.get(c.DEATH).value?this.currentState=this.stateMachines.get(c.DEATH):this.params.get(c.IDLE).value?this.currentState=this.stateMachines.get(c.IDLE):this.currentState=this.currentState;break;default:this.currentState=this.stateMachines.get(c.IDLE)}},i}(m))||S);i._RF.pop()}}}));

System.register("chunks:///_virtual/EnemyManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./index3.ts","./DataManager.ts","./EventManager.ts","./EntityManager.ts"],(function(t){"use strict";var n,i,e,s,a,o,c,r,h;return{setters:[function(t){n=t.inheritsLoose},function(t){i=t.cclegacy,e=t._decorator},function(t){s=t.EVENT_ENUM,a=t.ENTITY_STATE_ENUM,o=t.DIRECTION_ENUM},function(t){c=t.default},function(t){r=t.default},function(t){h=t.EntityManager}],execute:function(){var E;i._RF.push({},"22ca897xZxAZadAvpfzW0b5","EnemyManager",void 0);var u=e.ccclass;t("EnemyManager",u("EnemyManager")(E=function(t){function i(){return t.apply(this,arguments)||this}n(i,t);var e=i.prototype;return e.init=function(n){t.prototype.init.call(this,n),r.Instance.on(s.PLAYER_BORN,this.onChangeDirection,this),r.Instance.on(s.ATTACK_ENEMY,this.onDead,this),r.Instance.on(s.PLAYER_MOVE_END,this.onChangeDirection,this),this.onChangeDirection(!0)},e.onDestroy=function(){t.prototype.onDestroy.call(this),r.Instance.off(s.PLAYER_BORN,this.onChangeDirection),r.Instance.off(s.ATTACK_ENEMY,this.onDead),r.Instance.off(s.PLAYER_MOVE_END,this.onChangeDirection)},e.onChangeDirection=function(t){if(void 0===t&&(t=!1),this.state!==a.DEATH&&c.Instance.player){var n=c.Instance.player,i=n.x,e=n.y,s=Math.abs(i-this.x),r=Math.abs(e-this.y);(s!==r||t)&&(i>=this.x&&e<=this.y?this.direction=s>=r?o.RIGHT:o.TOP:i<=this.x&&e<=this.y?this.direction=s>=r?o.LEFT:o.TOP:i<=this.x&&e>=this.y?this.direction=s>=r?o.LEFT:o.BOTTOM:i>=this.x&&e>=this.y&&(this.direction=s>=r?o.RIGHT:o.BOTTOM))}},e.onDead=function(t){this.state!==a.DEATH&&this.id===t&&(this.state=a.DEATH)},i}(h))||E);i._RF.pop()}}}));

System.register("chunks:///_virtual/DeathSubStateMachine.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./index3.ts","./DirectionSubStateMachine.ts","./State.ts"],(function(t){"use strict";var e,n,s,a,i;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){s=t.DIRECTION_ENUM},function(t){a=t.default},function(t){i=t.default}],execute:function(){n._RF.push({},"241ddE/sV5ESagkkGGHgmSq","DeathSubStateMachine",void 0);var c="texture/door/death";t("default",function(t){function n(e){var n;return(n=t.call(this,e)||this).stateMachines.set(s.TOP,new i(e,""+c)),n.stateMachines.set(s.BOTTOM,new i(e,""+c)),n.stateMachines.set(s.LEFT,new i(e,""+c)),n.stateMachines.set(s.RIGHT,new i(e,""+c)),n}return e(n,t),n}(a));n._RF.pop()}}}));

System.register("chunks:///_virtual/EventManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Singleton.ts"],(function(t){"use strict";var e,n,i,c,r,s;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass,i=t.defineProperty,c=t.assertThisInitialized},function(t){r=t.cclegacy},function(t){s=t.default}],execute:function(){r._RF.push({},"24ae0fW/6lPj6CycifKfzAT","EventManager",void 0);t("default",function(t){function r(){for(var e,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,i(c(e),"eventDic",new Map),e}e(r,t);var s=r.prototype;return s.on=function(t,e,n){this.eventDic.has(t)?this.eventDic.get(t).push({func:e,ctx:n}):this.eventDic.set(t,[{func:e,ctx:n}])},s.off=function(t,e){if(this.eventDic.has(t)){var n=this.eventDic.get(t).findIndex((function(t){return e===t.func}));n>-1&&this.eventDic.get(t).splice(n,1)}},s.emit=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];this.eventDic.has(t)&&this.eventDic.get(t).forEach((function(t){var e=t.func,i=t.ctx;i?e.apply(i,n):e.apply(void 0,n)}))},s.clear=function(){this.eventDic.clear()},n(r,null,[{key:"Instance",get:function(){return t.GetInstance.call(this)}}]),r}(s));r._RF.pop()}}}));

System.register("chunks:///_virtual/level8.ts",["cc","./index3.ts"],(function(l){"use strict";var t,e,n,s,y;return{setters:[function(l){t=l.cclegacy},function(l){e=l.TILE_TYPE_ENUM,n=l.DIRECTION_ENUM,s=l.ENTITY_STATE_ENUM,y=l.ENTITY_TYPE_ENUM}],execute:function(){t._RF.push({},"27e38cDsM1PzYY9SGI1Yuo9","level8",void 0);var c=[[{src:16,type:e.WALL_LEFT_TOP},{src:5,type:e.WALL_COLUMN},{src:23,type:e.WALL_LEFT_BOTTOM},{src:18,type:e.CLIFF_LEFT},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_CENTER},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_CENTER},{src:null,type:null},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:20,type:e.WALL_ROW},{src:18,type:e.CLIFF_LEFT},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:9,type:e.WALL_ROW},{src:18,type:e.CLIFF_LEFT},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:21,type:e.WALL_ROW},{src:18,type:e.CLIFF_LEFT},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:null,type:null},{src:1,type:e.FLOOR},{src:18,type:e.CLIFF_LEFT},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:18,type:e.CLIFF_LEFT},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:18,type:e.CLIFF_LEFT},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:24,type:e.WALL_ROW},{src:18,type:e.CLIFF_LEFT},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null}]],r={x:1,y:7,direction:n.TOP,state:s.IDLE,type:y.PLAYER},p=[{x:8,y:1,direction:n.LEFT,state:s.IDLE,type:y.SKELETON_WOODEN}],u=[{x:1,y:2,state:s.IDLE,type:y.BURST,direction:n.TOP},{x:1,y:5,state:s.IDLE,type:y.BURST,direction:n.TOP},{x:1,y:6,state:s.IDLE,type:y.BURST,direction:n.TOP},{x:2,y:1,state:s.IDLE,type:y.BURST,direction:n.TOP},{x:3,y:1,state:s.IDLE,type:y.BURST,direction:n.TOP},{x:4,y:1,state:s.IDLE,type:y.BURST,direction:n.TOP},{x:5,y:1,state:s.IDLE,type:y.BURST,direction:n.TOP},{x:6,y:1,state:s.IDLE,type:y.BURST,direction:n.TOP},{x:6,y:2,state:s.IDLE,type:y.BURST,direction:n.TOP}],L={x:9,y:1,direction:n.LEFT,state:s.IDLE,type:y.DOOR};l("default",{mapInfo:c,player:r,enemies:p,spikes:[],bursts:u,door:L});t._RF.pop()}}}));

System.register("chunks:///_virtual/level15.ts",["cc","./index3.ts"],(function(t){"use strict";var L,e,c,s,y;return{setters:[function(t){L=t.cclegacy},function(t){e=t.TILE_TYPE_ENUM,c=t.DIRECTION_ENUM,s=t.ENTITY_STATE_ENUM,y=t.ENTITY_TYPE_ENUM}],execute:function(){L._RF.push({},"2a27aAXt0lE/JtRm98OTqQx","level15",void 0);var r=[[{src:20,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:22,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:25,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:13,type:e.WALL_LEFT_BOTTOM},{src:18,type:e.CLIFF_LEFT}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:21,type:e.WALL_RIGHT_TOP},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:15,type:e.WALL_RIGHT_TOP},{src:5,type:e.WALL_COLUMN},{src:13,type:e.WALL_LEFT_BOTTOM},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_CENTER},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:null,type:null},{src:null,type:null},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:1,type:e.FLOOR},{src:22,type:e.WALL_ROW},{src:28,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:null,type:null},{src:null,type:null},{src:15,type:e.WALL_RIGHT_TOP},{src:13,type:e.WALL_LEFT_BOTTOM},{src:18,type:e.CLIFF_LEFT},{src:null,type:null},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:null,type:null},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:15,type:e.WALL_RIGHT_TOP},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:23,type:e.WALL_RIGHT_BOTTOM},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}]],O={x:0,y:1,direction:c.RIGHT,state:s.IDLE,type:y.PLAYER},p=[{x:2,y:4,direction:c.TOP,state:s.IDLE,type:y.SKELETON_WOODEN},{x:4,y:6,direction:c.TOP,state:s.IDLE,type:y.SKELETON_WOODEN}],l=[{x:1,y:2,type:y.SPIKES_THREE,count:0},{x:2,y:2,type:y.SPIKES_THREE,count:0},{x:2,y:6,type:y.SPIKES_TWO,count:0}],_={x:7,y:7,direction:c.LEFT,state:s.IDLE,type:y.DOOR};t("default",{mapInfo:r,player:O,enemies:p,spikes:l,bursts:[],door:_});L._RF.pop()}}}));

System.register("chunks:///_virtual/DeathSubStateMachine2.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./index3.ts","./DirectionSubStateMachine.ts","./State.ts"],(function(t){"use strict";var e,n,s,a,i;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){s=t.DIRECTION_ENUM},function(t){a=t.default},function(t){i=t.default}],execute:function(){n._RF.push({},"2b7dclgdN1O94F08lm/yoJb","DeathSubStateMachine",void 0);var c="texture/player/death";t("default",function(t){function n(e){var n;return(n=t.call(this,e)||this).stateMachines.set(s.TOP,new i(e,c+"/top")),n.stateMachines.set(s.BOTTOM,new i(e,c+"/bottom")),n.stateMachines.set(s.LEFT,new i(e,c+"/left")),n.stateMachines.set(s.RIGHT,new i(e,c+"/right")),n}return e(n,t),n}(a));n._RF.pop()}}}));

System.register("chunks:///_virtual/level13.ts",["cc","./index3.ts"],(function(t){"use strict";var e,L,s,c,r;return{setters:[function(t){e=t.cclegacy},function(t){L=t.TILE_TYPE_ENUM,s=t.DIRECTION_ENUM,c=t.ENTITY_STATE_ENUM,r=t.ENTITY_TYPE_ENUM}],execute:function(){e._RF.push({},"2c57eLx3ZBCJJ5Ka+ZUAo46","level13",void 0);var y=[[{src:16,type:L.WALL_LEFT_TOP},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:23,type:L.WALL_LEFT_BOTTOM},{src:18,type:L.CLIFF_LEFT}],[{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:16,type:L.WALL_LEFT_TOP},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:23,type:L.WALL_RIGHT_BOTTOM},{src:19,type:L.CLIFF_RIGHT}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:21,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:22,type:L.WALL_RIGHT_TOP},{src:14,type:L.WALL_ROW},{src:19,type:L.CLIFF_RIGHT},{src:null,type:null},{src:null,type:null},{src:null,type:null}]],l={x:10,y:1,direction:s.LEFT,state:c.IDLE,type:r.PLAYER},p=[{x:1,y:4,direction:s.RIGHT,state:c.IDLE,type:r.SKELETON_WOODEN},{x:3,y:2,direction:s.RIGHT,state:c.IDLE,type:r.SKELETON_IRON},{x:5,y:1,direction:s.RIGHT,state:c.IDLE,type:r.SKELETON_WOODEN}],O=[{x:1,y:1,state:c.IDLE,type:r.BURST,direction:s.TOP},{x:5,y:2,state:c.IDLE,type:r.BURST,direction:s.TOP}],n={x:1,y:6,direction:s.BOTTOM,state:c.IDLE,type:r.DOOR};t("default",{mapInfo:y,player:l,enemies:p,spikes:[],bursts:O,door:n});e._RF.pop()}}}));

System.register("chunks:///_virtual/IdleSubStateMachine2.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./index3.ts","./DirectionSubStateMachine.ts","./State.ts"],(function(t){"use strict";var e,n,i,o,a,s;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,i=t.AnimationClip},function(t){o=t.DIRECTION_ENUM},function(t){a=t.default},function(t){s=t.default}],execute:function(){n._RF.push({},"2e19eBKUZNMtIFUU07cLdGH","IdleSubStateMachine",void 0);var c="texture/player/idle";t("default",function(t){function n(e){var n;return(n=t.call(this,e)||this).stateMachines.set(o.TOP,new s(e,c+"/top",i.WrapMode.Loop)),n.stateMachines.set(o.BOTTOM,new s(e,c+"/bottom",i.WrapMode.Loop)),n.stateMachines.set(o.LEFT,new s(e,c+"/left",i.WrapMode.Loop)),n.stateMachines.set(o.RIGHT,new s(e,c+"/right",i.WrapMode.Loop)),n}return e(n,t),n}(a));n._RF.pop()}}}));

System.register("chunks:///_virtual/StateMachine.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./index3.ts"],(function(t){"use strict";var e,r,a,n,i,s,u,c,o;return{setters:[function(t){e=t.inheritsLoose,r=t.defineProperty,a=t.assertThisInitialized,n=t.createForOfIteratorHelperLoose,i=t.createClass},function(t){s=t.cclegacy,u=t._decorator,c=t.Component},function(t){o=t.FSM_PARAM_TYPE_ENUM}],execute:function(){var l;s._RF.push({},"31220R+XUJPU6HV+aMVilf1","StateMachine",void 0);var p=u.ccclass;t("getInitParamsTrigger",(function(){return{type:o.TRIGGER,value:!1}})),t("getInitParamsNumber",(function(){return{type:o.NUMBER,value:0}})),t("default",p("StateMachine")(l=function(t){function s(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i))||this,r(a(e),"_currentState",null),r(a(e),"params",new Map),r(a(e),"stateMachines",new Map),r(a(e),"animationComponent",void 0),r(a(e),"waitingList",[]),e}e(s,t);var u=s.prototype;return u.getParams=function(t){if(this.params.has(t))return this.params.get(t).value},u.setParams=function(t,e){this.params.has(t)&&(this.params.get(t).value=e,this.run(),this.resetTrigger())},u.resetTrigger=function(){for(var t,e=n(this.params);!(t=e()).done;){var r=t.value[1];r.type===o.TRIGGER&&(r.value=!1)}},i(s,[{key:"currentState",get:function(){return this._currentState},set:function(t){t&&(this._currentState=t,this._currentState.run())}}]),s}(c))||l);s._RF.pop()}}}));

System.register("chunks:///_virtual/AirDeathSubStateMachine.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./index3.ts","./DirectionSubStateMachine.ts","./State.ts"],(function(t){"use strict";var e,n,i,a,s;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){i=t.DIRECTION_ENUM},function(t){a=t.default},function(t){s=t.default}],execute:function(){n._RF.push({},"3a504YKPHBOLZ380IDHrn1M","AirDeathSubStateMachine",void 0);var c="texture/player/airdeath";t("default",function(t){function n(e){var n;return(n=t.call(this,e)||this).stateMachines.set(i.TOP,new s(e,c+"/top")),n.stateMachines.set(i.BOTTOM,new s(e,c+"/bottom")),n.stateMachines.set(i.LEFT,new s(e,c+"/left")),n.stateMachines.set(i.RIGHT,new s(e,c+"/right")),n}return e(n,t),n}(a));n._RF.pop()}}}));

System.register("chunks:///_virtual/BurstStateMachine.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./index3.ts","./StateMachine.ts","./State.ts"],(function(t){"use strict";var e,i,s,n,a,r,c,h,u,o;return{setters:[function(t){e=t.inheritsLoose,i=t.asyncToGenerator},function(t){s=t.cclegacy,n=t._decorator,a=t.Animation},function(t){r=t.PARAMS_NAME_ENUM},function(t){c=t.getInitParamsTrigger,h=t.getInitParamsNumber,u=t.default},function(t){o=t.default}],execute:function(){var m;s._RF.push({},"3c046oDyAtHFKR0Y1cdWBz3","BurstStateMachine",void 0);var p=n.ccclass,A="texture/burst";t("BurstStateMachine",p("BurstStateMachine")(m=function(t){function s(){return t.apply(this,arguments)||this}e(s,t);var n=s.prototype;return n.init=function(){var t=i(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.animationComponent=this.node.addComponent(a),this.initParams(),this.initStateMachines(),this.initAnimationEvent(),t.next=6,Promise.all(this.waitingList);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.initAnimationEvent=function(){},n.initParams=function(){this.params.set(r.IDLE,c()),this.params.set(r.ATTACK,c()),this.params.set(r.DEATH,c()),this.params.set(r.DIRECTION,h())},n.initStateMachines=function(){this.stateMachines.set(r.IDLE,new o(this,A+"/idle")),this.stateMachines.set(r.ATTACK,new o(this,A+"/attack")),this.stateMachines.set(r.DEATH,new o(this,A+"/death"))},n.run=function(){switch(this.currentState){case this.stateMachines.get(r.IDLE):case this.stateMachines.get(r.ATTACK):case this.stateMachines.get(r.DEATH):this.params.get(r.DEATH).value?this.currentState=this.stateMachines.get(r.DEATH):this.params.get(r.ATTACK).value?this.currentState=this.stateMachines.get(r.ATTACK):this.params.get(r.IDLE).value?this.currentState=this.stateMachines.get(r.IDLE):this.currentState=this.currentState;break;default:this.currentState=this.stateMachines.get(r.IDLE)}},s}(u))||m);s._RF.pop()}}}));

System.register("chunks:///_virtual/SpikesManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./index3.ts","./DataManager.ts","./EventManager.ts","./index.ts","./TileManager2.ts","./SpikesStateMachine.ts"],(function(t){"use strict";var n,e,o,i,s,a,r,c,u,h,f,p,_,d,l,E,T,y,M,C;return{setters:[function(t){n=t.inheritsLoose,e=t.defineProperty,o=t.assertThisInitialized,i=t.createClass,s=t.asyncToGenerator},function(t){a=t.cclegacy,r=t._decorator,c=t.Component,u=t.Sprite,h=t.UITransform},function(t){f=t.EVENT_ENUM,p=t.ENTITY_STATE_ENUM,_=t.PARAMS_NAME_ENUM,d=t.SPIKES_TYPE_MAP_TOTAL_COUNT_ENUM},function(t){l=t.default},function(t){E=t.default},function(t){T=t.randomByLength},function(t){y=t.TILE_WIDTH,M=t.TILE_HEIGHT},function(t){C=t.SpikesStateMachine}],execute:function(){var S;a._RF.push({},"3f0fdrnHy5NaYg+CgvL6nX7","SpikesManager",void 0);var g=r.ccclass;t("default",g("SpikesManager")(S=function(t){function a(){for(var n,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return n=t.call.apply(t,[this].concat(s))||this,e(o(n),"id",T(12)),e(o(n),"_totalCount",void 0),e(o(n),"_count",0),e(o(n),"x",void 0),e(o(n),"y",void 0),e(o(n),"type",void 0),e(o(n),"fsm",void 0),n}n(a,t);var r=a.prototype;return r.init=function(){var t=s(regeneratorRuntime.mark((function t(n){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.node.addComponent(u).sizeMode=u.SizeMode.CUSTOM,this.getComponent(h).setContentSize(4*y,4*M),this.fsm=this.node.addComponent(C),t.next=7,this.fsm.init();case 7:this.x=n.x,this.y=n.y,e=n.type,this.totalCount=d[e],this.count=n.count,E.Instance.on(f.PLAYER_MOVE_END,this.onLoop,this);case 13:case"end":return t.stop()}}),t,this)})));return function(n){return t.apply(this,arguments)}}(),r.onDestroy=function(){E.Instance.off(f.PLAYER_MOVE_END,this.onLoop)},r.update=function(){this.node.setPosition(this.x*y-1.5*y,-this.y*M+1.5*M)},r.onLoop=function(){this.count==this.totalCount?this.count=1:this.count++,this.onAttack()},r.backZero=function(){this.count=0},r.onAttack=function(){var t=l.Instance.player,n=t.x,e=t.y;n===this.x&&e===this.y&&this.count===this.totalCount&&E.Instance.emit(f.ATTACK_PLAYER,p.DEATH)},i(a,[{key:"count",get:function(){return this._count},set:function(t){this._count=t,this.fsm.setParams(_.SPIKES_CUR_COUNT,t)}},{key:"totalCount",get:function(){return this._totalCount},set:function(t){this._totalCount=t,this.fsm.setParams(_.SPIKES_TOTAL_COUNT,t)}}]),a}(c))||S);a._RF.pop()}}}));

System.register("chunks:///_virtual/level6.ts",["cc","./index3.ts"],(function(L){"use strict";var e,t,O,s,r;return{setters:[function(L){e=L.cclegacy},function(L){t=L.TILE_TYPE_ENUM,O=L.DIRECTION_ENUM,s=L.ENTITY_STATE_ENUM,r=L.ENTITY_TYPE_ENUM}],execute:function(){e._RF.push({},"43c98rOb6BBBoH2DEzllDrE","level6",void 0);var c=[[{src:16,type:t.WALL_LEFT_TOP},{src:5,type:t.WALL_COLUMN},{src:23,type:t.WALL_COLUMN},{src:1,type:t.FLOOR},{src:22,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:13,type:t.WALL_LEFT_BOTTOM},{src:18,type:t.CLIFF_LEFT}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER},{src:null,type:null},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER},{src:null,type:null},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:15,type:t.WALL_RIGHT_TOP},{src:5,type:t.WALL_COLUMN},{src:23,type:t.WALL_RIGHT_BOTTOM},{src:1,type:t.FLOOR},{src:22,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:14,type:t.WALL_RIGHT_BOTTOM},{src:19,type:t.CLIFF_RIGHT}]],y={x:0,y:3,direction:O.RIGHT,state:s.IDLE,type:r.PLAYER},p=[{x:5,y:2,direction:O.LEFT,state:s.IDLE,type:r.SKELETON_WOODEN},{x:5,y:4,direction:O.LEFT,state:s.IDLE,type:r.SKELETON_WOODEN}],R={x:8,y:3,direction:O.LEFT,state:s.IDLE,type:r.DOOR};L("default",{mapInfo:c,player:y,enemies:p,spikes:[],bursts:[],door:R});e._RF.pop()}}}));

System.register("chunks:///_virtual/index.ts",["cc"],(function(n){"use strict";var r,e,t,o,a;return{setters:[function(n){r=n.cclegacy,e=n.Node,t=n.Layers,o=n.UITransform,a=n.Vec2}],execute:function(){r._RF.push({},"45195mI+15J35fYyRwuGB4j","index",void 0);n("randomByLength",(function(n){return Array.from({length:n}).reduce((function(n){return n+Math.floor(10*Math.random())}),"")})),n("randomByRange",(function(n,r){return Math.floor(Math.random()*(r-n)+n)})),n("createUINode",(function(n){void 0===n&&(n="");var r=new e(n);return r.layer=1<<t.nameToLayer("UI_2D"),r.addComponent(o).anchorPoint=new a(0,1),r}));var u=/\((\d+)\)/,c=function(n){var r;return parseInt((null===(r=n.match(u))||void 0===r?void 0:r[1])||"0")};n("sortSpriteFrame",(function(n){return n.sort((function(n,r){return c(n.name)-c(r.name)}))}));r._RF.pop()}}}));

System.register("chunks:///_virtual/level16.ts",["cc","./index3.ts"],(function(t){"use strict";var L,e,O,y,c;return{setters:[function(t){L=t.cclegacy},function(t){e=t.TILE_TYPE_ENUM,O=t.DIRECTION_ENUM,y=t.ENTITY_STATE_ENUM,c=t.ENTITY_TYPE_ENUM}],execute:function(){L._RF.push({},"4683fMc+ZVHBa2xWNA5+Ynm","level16",void 0);var s=[[{src:20,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:20,type:e.WALL_ROW},{src:18,type:e.CLIFF_LEFT},{src:null,type:null},{src:null,type:null},{src:20,type:e.WALL_LEFT_BOTTOM},{src:1,type:e.FLOOR},{src:20,type:e.WALL_ROW},{src:18,type:e.CLIFF_LEFT}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:16,type:e.WALL_LEFT_TOP},{src:5,type:e.WALL_COLUMN},{src:14,type:e.WALL_RIGHT_BOTTOM},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:15,type:e.WALL_RIGHT_TOP},{src:5,type:e.WALL_COLUMN},{src:14,type:e.WALL_RIGHT_BOTTOM},{src:17,type:e.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:16,type:e.WALL_LEFT_TOP},{src:14,type:e.WALL_RIGHT_BOTTOM},{src:19,type:e.CLIFF_RIGHT}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:19,type:e.CLIFF_RIGHT},{src:null,type:null}],[{src:15,type:e.WALL_RIGHT_TOP},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:14,type:e.WALL_RIGHT_BOTTOM},{src:19,type:e.CLIFF_RIGHT},{src:null,type:null}]],r={x:0,y:1,direction:O.RIGHT,state:y.IDLE,type:c.PLAYER},p=[{x:4,y:4,direction:O.LEFT,state:y.IDLE,type:c.SKELETON_WOODEN},{x:5,y:3,direction:O.LEFT,state:y.IDLE,type:c.SKELETON_WOODEN},{x:6,y:2,direction:O.LEFT,state:y.IDLE,type:c.SKELETON_WOODEN},{x:4,y:6,direction:O.TOP,state:y.IDLE,type:c.SKELETON_IRON},{x:4,y:7,direction:O.TOP,state:y.IDLE,type:c.SKELETON_IRON}],R=[{x:4,y:5,type:c.SPIKES_THREE,count:0},{x:5,y:5,type:c.SPIKES_TWO,count:0},{x:6,y:5,type:c.SPIKES_ONE,count:0}],_=[{x:3,y:5,state:y.IDLE,type:c.BURST,direction:O.TOP},{x:3,y:6,state:y.IDLE,type:c.BURST,direction:O.TOP},{x:3,y:7,state:y.IDLE,type:c.BURST,direction:O.TOP}],T={x:0,y:7,direction:O.LEFT,state:y.IDLE,type:c.DOOR};t("default",{mapInfo:s,player:r,enemies:p,spikes:R,bursts:_,door:T});L._RF.pop()}}}));

System.register("chunks:///_virtual/DeathSubStateMachine3.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./index3.ts","./DirectionSubStateMachine.ts","./State.ts"],(function(t){"use strict";var e,n,s,a,i;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){s=t.DIRECTION_ENUM},function(t){a=t.default},function(t){i=t.default}],execute:function(){n._RF.push({},"4692b5GdaBEEJvU/4+UN5W8","DeathSubStateMachine",void 0);var c="texture/woodenskeleton/death";t("default",function(t){function n(e){var n;return(n=t.call(this,e)||this).stateMachines.set(s.TOP,new i(e,c+"/top")),n.stateMachines.set(s.BOTTOM,new i(e,c+"/bottom")),n.stateMachines.set(s.LEFT,new i(e,c+"/left")),n.stateMachines.set(s.RIGHT,new i(e,c+"/right")),n}return e(n,t),n}(a));n._RF.pop()}}}));

System.register("chunks:///_virtual/BlockFrontSubStateMachine.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./index3.ts","./DirectionSubStateMachine.ts","./State.ts"],(function(t){"use strict";var e,n,s,c,i;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){s=t.DIRECTION_ENUM},function(t){c=t.default},function(t){i=t.default}],execute:function(){n._RF.push({},"4efe8U9XsVHkpeY7UrID8Xw","BlockFrontSubStateMachine",void 0);var a="texture/player/blockfront";t("default",function(t){function n(e){var n;return(n=t.call(this,e)||this).stateMachines.set(s.TOP,new i(e,a+"/top")),n.stateMachines.set(s.BOTTOM,new i(e,a+"/bottom")),n.stateMachines.set(s.LEFT,new i(e,a+"/left")),n.stateMachines.set(s.RIGHT,new i(e,a+"/right")),n}return e(n,t),n}(c));n._RF.pop()}}}));

System.register("chunks:///_virtual/BlockTurnLeftSubStateMachine.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./index3.ts","./DirectionSubStateMachine.ts","./State.ts"],(function(t){"use strict";var e,n,s,c,i;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){s=t.DIRECTION_ENUM},function(t){c=t.default},function(t){i=t.default}],execute:function(){n._RF.push({},"5464eFNeUVGa7VqREhLbkVh","BlockTurnLeftSubStateMachine",void 0);var u="texture/player/blockturnleft";t("default",function(t){function n(e){var n;return(n=t.call(this,e)||this).stateMachines.set(s.TOP,new i(e,u+"/top")),n.stateMachines.set(s.BOTTOM,new i(e,u+"/bottom")),n.stateMachines.set(s.LEFT,new i(e,u+"/left")),n.stateMachines.set(s.RIGHT,new i(e,u+"/right")),n}return e(n,t),n}(c));n._RF.pop()}}}));

System.register("chunks:///_virtual/SpikesTwoSubStateMachine.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./index3.ts","./State.ts","./SpikesSubStateMachine.ts"],(function(e){"use strict";var t,n,s,i,u;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy},function(e){s=e.SPIKES_COUNT_ENUM},function(e){i=e.default},function(e){u=e.default}],execute:function(){n._RF.push({},"57709XdX1tDnobcQimju197","SpikesTwoSubStateMachine",void 0);var c="texture/spikes/spikestwo";e("default",function(e){function n(t){var n;return(n=e.call(this,t)||this).stateMachines.set(s.ZERO,new i(t,c+"/zero")),n.stateMachines.set(s.ONE,new i(t,c+"/one")),n.stateMachines.set(s.TWO,new i(t,c+"/two")),n.stateMachines.set(s.THREE,new i(t,c+"/three")),n}return t(n,e),n}(u));n._RF.pop()}}}));

System.register("chunks:///_virtual/level2.ts",["cc","./index3.ts"],(function(L){"use strict";var e,t,O,s,c;return{setters:[function(L){e=L.cclegacy},function(L){t=L.TILE_TYPE_ENUM,O=L.DIRECTION_ENUM,s=L.ENTITY_STATE_ENUM,c=L.ENTITY_TYPE_ENUM}],execute:function(){e._RF.push({},"5955esBL69J66Gkyu4j+zd2","level2",void 0);var r=[[{src:16,type:t.WALL_LEFT_TOP},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:13,type:t.WALL_LEFT_BOTTOM},{src:18,type:t.CLIFF_LEFT}],[{src:21,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:20,type:t.WALL_LEFT_BOTTOM},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:20,type:t.WALL_LEFT_BOTTOM},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:15,type:t.WALL_RIGHT_TOP},{src:5,type:t.WALL_COLUMN},{src:14,type:t.WALL_RIGHT_BOTTOM},{src:1,type:t.FLOOR},{src:22,type:t.WALL_COLUMN},{src:14,type:t.WALL_RIGHT_BOTTOM},{src:19,type:t.CLIFF_RIGHT}]],y={x:2,y:0,direction:O.BOTTOM,state:s.IDLE,type:c.PLAYER},p=[{x:3,y:2,direction:O.TOP,state:s.IDLE,type:c.SKELETON_WOODEN},{x:4,y:3,direction:O.TOP,state:s.IDLE,type:c.SKELETON_WOODEN}],_={x:5,y:3,direction:O.LEFT,state:s.IDLE,type:c.DOOR};L("default",{mapInfo:r,player:y,enemies:p,spikes:[],bursts:[],door:_});e._RF.pop()}}}));

System.register("chunks:///_virtual/level21.ts",["cc","./index3.ts"],(function(t){"use strict";var e,L,s,c,r;return{setters:[function(t){e=t.cclegacy},function(t){L=t.TILE_TYPE_ENUM,s=t.DIRECTION_ENUM,c=t.ENTITY_STATE_ENUM,r=t.ENTITY_TYPE_ENUM}],execute:function(){e._RF.push({},"5dbbbuzhDBPqbkOTCUQf7ER","level21",void 0);var O=[[{src:null,type:null},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:18,type:L.CLIFF_LEFT}],[{src:null,type:null},{src:1,type:L.FLOOR},{src:16,type:L.WALL_LEFT_TOP},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:13,type:L.WALL_LEFT_BOTTOM},{src:17,type:L.CLIFF_CENTER}],[{src:null,type:null},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:null,type:null},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:null,type:null},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:16,type:L.WALL_LEFT_TOP},{src:13,type:L.WALL_LEFT_BOTTOM},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:null,type:null},{src:1,type:L.FLOOR},{src:21,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:21,type:L.WALL_RIGHT_BOTTOM},{src:19,type:L.CLIFF_RIGHT}],[{src:20,type:L.WALL_LEFT_TOP},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:null,type:null}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:19,type:L.CLIFF_RIGHT},{src:null,type:null}],[{src:15,type:L.WALL_RIGHT_TOP},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:14,type:L.WALL_RIGHT_BOTTOM},{src:19,type:L.CLIFF_RIGHT},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null}]],y={x:0,y:7,direction:s.TOP,state:c.IDLE,type:r.PLAYER},p=[{x:2,y:6,direction:s.LEFT,state:c.IDLE,type:r.SKELETON_WOODEN}],R=[{x:2,y:3,state:c.IDLE,type:r.BURST,direction:s.TOP},{x:2,y:5,state:c.IDLE,type:r.BURST,direction:s.TOP},{x:3,y:3,state:c.IDLE,type:r.BURST,direction:s.TOP},{x:3,y:4,state:c.IDLE,type:r.BURST,direction:s.TOP}],F={x:7,y:6,direction:s.LEFT,state:c.IDLE,type:r.DOOR};t("default",{mapInfo:O,player:y,enemies:p,spikes:[],bursts:R,door:F});e._RF.pop()}}}));

System.register("chunks:///_virtual/SmokeManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./EntityManager.ts","./SmokeStateMachine.ts"],(function(t){"use strict";var e,n,r,a,i,o;return{setters:[function(t){e=t.inheritsLoose,n=t.asyncToGenerator},function(t){r=t.cclegacy,a=t._decorator},function(t){i=t.EntityManager},function(t){o=t.SmokeStateMachine}],execute:function(){var s;r._RF.push({},"5ee06kSeElMQa5ZUIpMP8kD","SmokeManager",void 0);var c=a.ccclass;t("SmokeManager",c("SmokeManager")(s=function(t){function r(){return t.apply(this,arguments)||this}return e(r,t),r.prototype.init=function(){var e=n(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.fsm=this.addComponent(o),e.next=3,this.fsm.init();case 3:t.prototype.init.call(this,n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r}(i))||s);r._RF.pop()}}}));

System.register("chunks:///_virtual/IronSkeletonStateMachine.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./index3.ts","./StateMachine.ts","./DeathSubStateMachine5.ts","./IdleSubStateMachine3.ts"],(function(t){"use strict";var e,n,i,a,s,r,c,h,o,u,f;return{setters:[function(t){e=t.inheritsLoose,n=t.asyncToGenerator},function(t){i=t.cclegacy,a=t._decorator,s=t.Animation},function(t){r=t.PARAMS_NAME_ENUM},function(t){c=t.getInitParamsTrigger,h=t.getInitParamsNumber,o=t.default},function(t){u=t.default},function(t){f=t.default}],execute:function(){var l;i._RF.push({},"68782wV8HhCfa6ekm9AeUZP","IronSkeletonStateMachine",void 0);var S=a.ccclass;t("IronSkeletonStateMachine",S("IronSkeletonStateMachine")(l=function(t){function i(){return t.apply(this,arguments)||this}e(i,t);var a=i.prototype;return a.init=function(){var t=n(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.animationComponent=this.node.addComponent(s),this.initParams(),this.initStateMachines(),this.initAnimationEvent(),t.next=6,Promise.all(this.waitingList);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),a.initAnimationEvent=function(){},a.initParams=function(){this.params.set(r.IDLE,c()),this.params.set(r.DEATH,c()),this.params.set(r.DIRECTION,h())},a.initStateMachines=function(){this.stateMachines.set(r.IDLE,new f(this)),this.stateMachines.set(r.DEATH,new u(this))},a.run=function(){switch(this.currentState){case this.stateMachines.get(r.IDLE):case this.stateMachines.get(r.DEATH):this.params.get(r.DEATH).value?this.currentState=this.stateMachines.get(r.DEATH):this.params.get(r.IDLE).value?this.currentState=this.stateMachines.get(r.IDLE):this.currentState=this.currentState;break;default:this.currentState=this.stateMachines.get(r.IDLE)}},i}(o))||l);i._RF.pop()}}}));

System.register("chunks:///_virtual/DataManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Singleton.ts"],(function(t){"use strict";var e,s,i,n,o,r;return{setters:[function(t){e=t.inheritsLoose,s=t.createClass,i=t.defineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy},function(t){r=t.default}],execute:function(){o._RF.push({},"69ddbsBXVxBPaL2kWVS5gzU","DataManager",void 0);t("default",function(t){function o(){var e;return e=t.call(this)||this,i(n(e),"player",void 0),i(n(e),"enemies",void 0),i(n(e),"spikes",void 0),i(n(e),"bursts",void 0),i(n(e),"door",void 0),i(n(e),"smokes",void 0),i(n(e),"mapRowCount",void 0),i(n(e),"mapColumnCount",void 0),i(n(e),"levelIndex",1),i(n(e),"mapInfo",[]),i(n(e),"tileInfo",[]),i(n(e),"records",void 0),e.reset(),e}return e(o,t),o.prototype.reset=function(){this.mapInfo=[],this.tileInfo=[],this.mapRowCount=0,this.mapColumnCount=0,this.player=null,this.enemies=[],this.spikes=[],this.bursts=[],this.door=null,this.smokes=[],this.records=[]},s(o,null,[{key:"Instance",get:function(){return t.GetInstance.call(this)}}]),o}(r));o._RF.pop()}}}));

System.register("chunks:///_virtual/WoodenSkeletonManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./index3.ts","./DataManager.ts","./EventManager.ts","./EnemyManager.ts","./WoodenSkeletonStateMachine.ts"],(function(t){"use strict";var n,e,a,o,r,s,i,c,u,h;return{setters:[function(t){n=t.inheritsLoose,e=t.asyncToGenerator},function(t){a=t.cclegacy,o=t._decorator},function(t){r=t.EVENT_ENUM,s=t.ENTITY_STATE_ENUM},function(t){i=t.default},function(t){c=t.default},function(t){u=t.EnemyManager},function(t){h=t.WoodenSkeletonStateMachine}],execute:function(){var f;a._RF.push({},"6a65eB7aJFB147ornLn6o5A","WoodenSkeletonManager",void 0);var l=o.ccclass;t("WoodenSkeletonManager",l("WoodenSkeletonManager")(f=function(t){function a(){return t.apply(this,arguments)||this}n(a,t);var o=a.prototype;return o.init=function(){var n=e(regeneratorRuntime.mark((function n(e){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.fsm=this.addComponent(h),n.next=3,this.fsm.init();case 3:t.prototype.init.call(this,e),c.Instance.on(r.PLAYER_MOVE_END,this.onAttack,this);case 5:case"end":return n.stop()}}),n,this)})));return function(t){return n.apply(this,arguments)}}(),o.onDestroy=function(){t.prototype.onDestroy.call(this),c.Instance.off(r.PLAYER_MOVE_END,this.onAttack)},o.onAttack=function(){if(this.state!==s.DEATH){var t=i.Instance.player,n=t.targetX,e=t.targetY,a=t.state;(n===this.x&&Math.abs(e-this.y)<=1||e===this.y&&Math.abs(n-this.x)<=1)&&a!==s.DEATH&&a!==s.AIRDEATH?(this.state=s.ATTACK,c.Instance.emit(r.ATTACK_PLAYER,s.DEATH)):this.state=s.IDLE}},a}(u))||f);a._RF.pop()}}}));

System.register("chunks:///_virtual/AttackSubStateMachine.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./index3.ts","./DirectionSubStateMachine.ts","./State.ts"],(function(t){"use strict";var e,a,n,c,r,s,o,i;return{setters:[function(t){e=t.inheritsLoose},function(t){a=t.cclegacy,n=t.AnimationClip},function(t){c=t.DIRECTION_ENUM,r=t.SHAKE_TYPE_ENUM},function(t){s=t.default},function(t){o=t.default,i=t.ANIMATION_SPEED}],execute:function(){a._RF.push({},"7474d3eV6pCmJD98KGLuzl7","AttackSubStateMachine",void 0);var u="texture/player/attack";t("default",function(t){function a(e){var a;return(a=t.call(this,e)||this).stateMachines.set(c.TOP,new o(e,u+"/top",n.WrapMode.Normal,i,[{frame:4*i,func:"onAttackShake",params:[r.TOP]}])),a.stateMachines.set(c.BOTTOM,new o(e,u+"/bottom",n.WrapMode.Normal,i,[{frame:4*i,func:"onAttackShake",params:[r.BOTTOM]}])),a.stateMachines.set(c.LEFT,new o(e,u+"/left",n.WrapMode.Normal,i,[{frame:4*i,func:"onAttackShake",params:[r.LEFT]}])),a.stateMachines.set(c.RIGHT,new o(e,u+"/right",n.WrapMode.Normal,i,[{frame:4*i,func:"onAttackShake",params:[r.RIGHT]}])),a}return e(a,t),a}(s));a._RF.pop()}}}));

System.register("chunks:///_virtual/SubStateMachine.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,n,r;return{setters:[function(t){e=t.createClass,n=t.defineProperty},function(t){r=t.cclegacy}],execute:function(){r._RF.push({},"7d1d3dDqcpN9780JK1/BCfW","SubStateMachine",void 0);t("default",function(){function t(t){n(this,"_currentState",null),n(this,"stateMachines",new Map),this.fsm=t}return e(t,[{key:"currentState",get:function(){return this._currentState},set:function(t){t&&(this._currentState=t,this._currentState.run())}}]),t}());r._RF.pop()}}}));

System.register("chunks:///_virtual/SpikesOneSubStateMachine.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./index3.ts","./State.ts","./SpikesSubStateMachine.ts"],(function(e){"use strict";var t,n,s,i,u;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy},function(e){s=e.SPIKES_COUNT_ENUM},function(e){i=e.default},function(e){u=e.default}],execute:function(){n._RF.push({},"81558fwqMVG7YVpFd1tj//7","SpikesOneSubStateMachine",void 0);var c="texture/spikes/spikesone";e("default",function(e){function n(t){var n;return(n=e.call(this,t)||this).stateMachines.set(s.ZERO,new i(t,c+"/zero")),n.stateMachines.set(s.ONE,new i(t,c+"/one")),n.stateMachines.set(s.TWO,new i(t,c+"/two")),n}return t(n,e),n}(u));n._RF.pop()}}}));

System.register("chunks:///_virtual/DirectionSubStateMachine.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./index3.ts","./SubStateMachine.ts"],(function(t){"use strict";var e,n,i,u,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){i=t.PARAMS_NAME_ENUM,u=t.DIRECTION_ORDER_ENUM},function(t){c=t.default}],execute:function(){n._RF.push({},"83f3bk3kQdKeIv5JULZwPbu","DirectionSubStateMachine",void 0);t("default",function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n.prototype.run=function(){var t=this.fsm.params.get(i.DIRECTION).value;this.currentState=this.stateMachines.get(u[t])},n}(c));n._RF.pop()}}}));

System.register("chunks:///_virtual/DoorManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./index3.ts","./DataManager.ts","./EventManager.ts","./EntityManager.ts","./DoorStateMachine.ts"],(function(t){"use strict";var n,e,r,o,a,i,s,c,u,f;return{setters:[function(t){n=t.inheritsLoose,e=t.asyncToGenerator},function(t){r=t.cclegacy,o=t._decorator},function(t){a=t.EVENT_ENUM,i=t.ENTITY_STATE_ENUM},function(t){s=t.default},function(t){c=t.default},function(t){u=t.EntityManager},function(t){f=t.DoorStateMachine}],execute:function(){var p;r._RF.push({},"85323nSpM5Cx4bEz6w7N8L7","DoorManager",void 0);var h=o.ccclass;t("DoorManager",h("DoorManager")(p=function(t){function r(){return t.apply(this,arguments)||this}n(r,t);var o=r.prototype;return o.init=function(){var n=e(regeneratorRuntime.mark((function n(e){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.fsm=this.addComponent(f),n.next=3,this.fsm.init();case 3:t.prototype.init.call(this,e),c.Instance.on(a.DOOR_OPEN,this.onOpen,this);case 5:case"end":return n.stop()}}),n,this)})));return function(t){return n.apply(this,arguments)}}(),o.onDestroy=function(){t.prototype.onDestroy.call(this),c.Instance.off(a.DOOR_OPEN,this.onOpen)},o.onOpen=function(){s.Instance.enemies.every((function(t){return t.state===i.DEATH}))&&this.state!==i.DEATH&&(this.state=i.DEATH)},r}(u))||p);r._RF.pop()}}}));

System.register("chunks:///_virtual/BlockTurnRightSubStateMachine.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./index3.ts","./DirectionSubStateMachine.ts","./State.ts"],(function(t){"use strict";var e,n,i,c,s;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){i=t.DIRECTION_ENUM},function(t){c=t.default},function(t){s=t.default}],execute:function(){n._RF.push({},"86c5dRpZ5NMg6i/8oLqtvEt","BlockTurnRightSubStateMachine",void 0);var u="texture/player/blockturnright";t("default",function(t){function n(e){var n;return(n=t.call(this,e)||this).stateMachines.set(i.TOP,new s(e,u+"/top")),n.stateMachines.set(i.BOTTOM,new s(e,u+"/bottom")),n.stateMachines.set(i.LEFT,new s(e,u+"/left")),n.stateMachines.set(i.RIGHT,new s(e,u+"/right")),n}return e(n,t),n}(c));n._RF.pop()}}}));

System.register("chunks:///_virtual/Singleton.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(n){"use strict";var t,e;return{setters:[function(n){t=n.defineProperty},function(n){e=n.cclegacy}],execute:function(){e._RF.push({},"883a7a8j5pNrpgt8fjpgNQF","Singleton",void 0);var i=n("default",function(){function n(){}return n.GetInstance=function(){return null===this._instance&&(this._instance=new this),this._instance},n}());t(i,"_instance",null),e._RF.pop()}}}));

System.register("chunks:///_virtual/MenuManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./index3.ts","./EventManager.ts"],(function(n){"use strict";var e,t,a,r,u,c;return{setters:[function(n){e=n.inheritsLoose},function(n){t=n.cclegacy,a=n._decorator,r=n.Component},function(n){u=n.EVENT_ENUM},function(n){c=n.default}],execute:function(){var o;t._RF.push({},"9ae07vNWQVKI78+H+eSZJIP","MenuManager",void 0);var i=a.ccclass;n("MenuManager",i("MenuManager")(o=function(n){function t(){return n.apply(this,arguments)||this}e(t,n);var a=t.prototype;return a.handleRevoke=function(){c.Instance.emit(u.REVOKE_STEP)},a.handleRestart=function(){c.Instance.emit(u.RESTART_LEVEL)},a.handleOut=function(){c.Instance.emit(u.QUIT_BATTLE)},t}(r))||o);t._RF.pop()}}}));

System.register("chunks:///_virtual/level3.ts",["cc","./index3.ts"],(function(l){"use strict";var t,e,L,c,y;return{setters:[function(l){t=l.cclegacy},function(l){e=l.TILE_TYPE_ENUM,L=l.DIRECTION_ENUM,c=l.ENTITY_STATE_ENUM,y=l.ENTITY_TYPE_ENUM}],execute:function(){t._RF.push({},"9b4ee8abVlJpo+q+jW3e00Q","level3",void 0);var s=[[{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:20,type:e.WALL_LEFT_BOTTOM},{src:1,type:e.FLOOR},{src:20,type:e.WALL_LEFT_BOTTOM},{src:18,type:e.CLIFF_LEFT},{src:null,type:null}],[{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:null,type:null}],[{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:15,type:e.WALL_RIGHT_TOP},{src:13,type:e.WALL_LEFT_BOTTOM},{src:17,type:e.CLIFF_CENTER}],[{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:22,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:14,type:e.WALL_RIGHT_BOTTOM},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:22,type:e.WALL_COLUMN},{src:13,type:e.WALL_LEFT_BOTTOM},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:null,type:null},{src:15,type:e.WALL_RIGHT_TOP},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:14,type:e.WALL_RIGHT_BOTTOM},{src:19,type:e.CLIFF_RIGHT}]],p={x:0,y:8,direction:L.RIGHT,state:c.IDLE,type:y.PLAYER},r=[{x:6,y:7,direction:L.TOP,state:c.IDLE,type:y.SKELETON_WOODEN}],O=[{x:4,y:8,type:y.SPIKES_ONE,count:0},{x:4,y:9,type:y.SPIKES_ONE,count:0},{x:6,y:3,type:y.SPIKES_ONE,count:0},{x:7,y:3,type:y.SPIKES_ONE,count:0},{x:6,y:5,type:y.SPIKES_ONE,count:0},{x:7,y:5,type:y.SPIKES_ONE,count:0}],n={x:6,y:0,direction:L.BOTTOM,state:c.IDLE,type:y.DOOR};l("default",{mapInfo:s,player:p,enemies:r,spikes:O,bursts:[],door:n});t._RF.pop()}}}));

System.register("chunks:///_virtual/BurstManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./index3.ts","./DataManager.ts","./EventManager.ts","./TileManager.ts","./EntityManager.ts","./BurstStateMachine.ts"],(function(t){"use strict";var n,e,s,i,r,a,o,u,c,h,f,E,T,p;return{setters:[function(t){n=t.inheritsLoose,e=t.asyncToGenerator},function(t){s=t.cclegacy,i=t._decorator,r=t.UITransform},function(t){a=t.EVENT_ENUM,o=t.ENTITY_STATE_ENUM,u=t.SHAKE_TYPE_ENUM},function(t){c=t.default},function(t){h=t.default},function(t){f=t.TILE_WIDTH,E=t.TILE_HEIGHT},function(t){T=t.EntityManager},function(t){p=t.BurstStateMachine}],execute:function(){var l;s._RF.push({},"9bc2amc2ixEialGuyRG6zPa","BurstManager",void 0);var M=i.ccclass;t("BurstManager",M("BurstManager")(l=function(t){function s(){return t.apply(this,arguments)||this}n(s,t);var i=s.prototype;return i.init=function(){var n=e(regeneratorRuntime.mark((function n(e){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.fsm=this.addComponent(p),n.next=3,this.fsm.init();case 3:t.prototype.init.call(this,e),this.transform=this.getComponent(r),this.transform.setContentSize(f,E),h.Instance.on(a.PLAYER_MOVE_END,this.onBurst,this);case 7:case"end":return n.stop()}}),n,this)})));return function(t){return n.apply(this,arguments)}}(),i.onDestroy=function(){t.prototype.onDestroy.call(this),h.Instance.off(a.PLAYER_MOVE_END,this.onBurst)},i.update=function(){this.node.setPosition(this.x*f,-this.y*E)},i.onBurst=function(){if(this.state!==o.DEATH){var t=c.Instance.player,n=t.targetX,e=t.targetY;this.x===n&&this.y===e&&this.state===o.IDLE?this.state=o.ATTACK:this.state===o.ATTACK&&(this.state=o.DEATH,h.Instance.emit(a.SCREEN_SHAKE,u.BOTTOM),this.x===n&&this.y===e&&h.Instance.emit(a.ATTACK_PLAYER,o.AIRDEATH))}},s}(T))||l);s._RF.pop()}}}));

System.register("chunks:///_virtual/level12.ts",["cc","./index3.ts"],(function(t){"use strict";var e,L,s,c,r;return{setters:[function(t){e=t.cclegacy},function(t){L=t.TILE_TYPE_ENUM,s=t.DIRECTION_ENUM,c=t.ENTITY_STATE_ENUM,r=t.ENTITY_TYPE_ENUM}],execute:function(){e._RF.push({},"9ec1aq3hfZPtqxbHiIEVnWq","level12",void 0);var y=[[{src:20,type:L.WALL_LEFT_TOP},{src:1,type:L.FLOOR},{src:18,type:L.CLIFF_LEFT},{src:null,type:null},{src:null,type:null},{src:20,type:L.WALL_LEFT_BOTTOM},{src:18,type:L.CLIFF_LEFT}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:21,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:1,type:L.FLOOR},{src:20,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:22,type:L.WALL_ROW},{src:23,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:21,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:21,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}]],p={x:3,y:5,direction:s.TOP,state:c.IDLE,type:r.PLAYER},O=[{x:1,y:1,direction:s.BOTTOM,state:c.IDLE,type:r.SKELETON_IRON},{x:6,y:2,direction:s.LEFT,state:c.IDLE,type:r.SKELETON_WOODEN}],E=[{x:4,y:2,state:c.IDLE,type:r.BURST,direction:s.TOP},{x:4,y:3,state:c.IDLE,type:r.BURST,direction:s.TOP}],l={x:0,y:1,direction:s.LEFT,state:c.IDLE,type:r.DOOR};t("default",{mapInfo:y,player:p,enemies:O,spikes:[],bursts:E,door:l});e._RF.pop()}}}));

System.register("chunks:///_virtual/LoadingManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./index3.ts"],(function(r){"use strict";var e,n,t,a,o,i,c,s,u,p,l,f;return{setters:[function(r){e=r.applyDecoratedDescriptor,n=r.inheritsLoose,t=r.initializerDefineProperty,a=r.assertThisInitialized,o=r.asyncToGenerator},function(r){i=r.cclegacy,c=r._decorator,s=r.ProgressBar,u=r.director,p=r.resources,l=r.Component},function(r){f=r.SCENE_ENUM}],execute:function(){var d,g,h,L,y;i._RF.push({},"a4cfb5Lk4FE0LKOiaKhBjZV","LoadingManager",void 0);var b=c.ccclass,v=c.property;r("LoadingManager",(d=b("LoadingManager"),g=v(s),d((y=e((L=function(r){function e(){for(var e,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return e=r.call.apply(r,[this].concat(o))||this,t(a(e),"bar",y,a(e)),e}n(e,r);var i=e.prototype;return i.onLoad=function(){this.preLoad()},i.preLoad=function(){var r=this;u.preloadScene(f.Start),p.preloadDir("texture",(function(e,n){r.bar.progress=e/n}),function(){var e=o(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=5;break}return e.next=3,new Promise((function(r){setTimeout(r,2e3)}));case 3:return r.preLoad(),e.abrupt("return");case 5:u.loadScene(f.Start);case 6:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}())},e}(l)).prototype,"bar",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=L))||h));i._RF.pop()}}}));

System.register("chunks:///_virtual/level20.ts",["cc","./index3.ts"],(function(t){"use strict";var e,L,s,c,y;return{setters:[function(t){e=t.cclegacy},function(t){L=t.TILE_TYPE_ENUM,s=t.DIRECTION_ENUM,c=t.ENTITY_STATE_ENUM,y=t.ENTITY_TYPE_ENUM}],execute:function(){e._RF.push({},"ac9b3g//MBCo45KoYsNoRbM","level20",void 0);var r=[[{src:null,type:null},{src:16,type:L.WALL_LEFT_TOP},{src:5,type:L.WALL_COLUMN},{src:23,type:L.WALL_RIGHT_BOTTOM},{src:1,type:L.FLOOR},{src:20,type:L.WALL_ROW},{src:18,type:L.CLIFF_LEFT}],[{src:null,type:null},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:null,type:null},{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:21,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:null,type:null},{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:null,type:null},{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:20,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:null,type:null},{src:15,type:L.WALL_RIGHT_TOP},{src:25,type:L.WALL_COLUMN},{src:23,type:L.WALL_RIGHT_BOTTOM},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:null,type:null},{src:null,type:null},{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:null,type:null},{src:null,type:null},{src:21,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:22,type:L.WALL_RIGHT_TOP},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:14,type:L.WALL_RIGHT_BOTTOM},{src:19,type:L.CLIFF_RIGHT}]],p={x:0,y:4,direction:s.RIGHT,state:c.IDLE,type:y.PLAYER},O=[{x:9,y:1,direction:s.LEFT,state:c.IDLE,type:y.SKELETON_WOODEN},{x:9,y:3,direction:s.LEFT,state:c.IDLE,type:y.SKELETON_IRON},{x:9,y:4,direction:s.LEFT,state:c.IDLE,type:y.SKELETON_IRON}],l=[{x:1,y:2,state:c.IDLE,type:y.BURST,direction:s.TOP},{x:1,y:3,state:c.IDLE,type:y.BURST,direction:s.TOP},{x:2,y:3,state:c.IDLE,type:y.BURST,direction:s.TOP},{x:2,y:4,state:c.IDLE,type:y.BURST,direction:s.TOP},{x:7,y:4,state:c.IDLE,type:y.BURST,direction:s.TOP}],R={x:9,y:0,direction:s.BOTTOM,state:c.IDLE,type:y.DOOR};t("default",{mapInfo:r,player:p,enemies:O,spikes:[],bursts:l,door:R});e._RF.pop()}}}));

System.register("chunks:///_virtual/index2.ts",["cc","./level1.ts","./level5.ts","./level2.ts","./level3.ts","./level4.ts","./level6.ts","./level7.ts","./level8.ts","./level9.ts","./level10.ts","./level11.ts","./level12.ts","./level13.ts","./level14.ts","./level15.ts","./level16.ts","./level17.ts","./level18.ts","./level19.ts","./level20.ts","./level21.ts"],(function(e){"use strict";var l,t,n,u,f,v,c,i,s,d,a,o,r,p,x,F,_,g,h,y,D,R;return{setters:[function(e){l=e.cclegacy},function(e){t=e.default},function(e){n=e.default},function(e){u=e.default},function(e){f=e.default},function(e){v=e.default},function(e){c=e.default},function(e){i=e.default},function(e){s=e.default},function(e){d=e.default},function(e){a=e.default},function(e){o=e.default},function(e){r=e.default},function(e){p=e.default},function(e){x=e.default},function(e){F=e.default},function(e){_=e.default},function(e){g=e.default},function(e){h=e.default},function(e){y=e.default},function(e){D=e.default},function(e){R=e.default}],execute:function(){l._RF.push({},"ad833Pd+7FCXrLYjDUe5bD9","index",void 0);e("default",{level1:t,level2:u,level3:f,level4:v,level5:n,level6:c,level7:i,level8:s,level9:d,level10:a,level11:o,level12:r,level13:p,level14:x,level15:F,level16:_,level17:g,level18:h,level19:y,level20:D,level21:R});l._RF.pop()}}}));

System.register("chunks:///_virtual/ShakeManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./index3.ts","./EventManager.ts"],(function(t){"use strict";var i,s,o,e,n,h,a,d,r,l;return{setters:[function(t){i=t.inheritsLoose,s=t.defineProperty,o=t.assertThisInitialized},function(t){e=t.cclegacy,n=t._decorator,h=t.game,a=t.Component},function(t){d=t.EVENT_ENUM,r=t.SHAKE_TYPE_ENUM},function(t){l=t.default}],execute:function(){var c;e._RF.push({},"ae2aewOHhpByp3eG8llF0Q9","ShakeManager",void 0);var u=n.ccclass;t("ShakeManager",u("ShakeManager")(c=function(t){function e(){for(var i,e=arguments.length,n=new Array(e),h=0;h<e;h++)n[h]=arguments[h];return i=t.call.apply(t,[this].concat(n))||this,s(o(i),"isShaking",void 0),s(o(i),"shakeType",void 0),s(o(i),"oldTime",void 0),s(o(i),"oldPos",{x:0,y:0}),i}i(e,t);var n=e.prototype;return n.onLoad=function(){l.Instance.on(d.SCREEN_SHAKE,this.onShake,this)},n.onDestroy=function(){l.Instance.off(d.SCREEN_SHAKE,this.onShake)},n.stop=function(){this.isShaking=!1},n.onShake=function(t){this.isShaking||(this.isShaking=!0,this.shakeType=t,this.oldTime=h.totalTime,this.oldPos.x=this.node.position.x,this.oldPos.y=this.node.position.y)},n.update=function(){this.onShakeUpdate()},n.onShakeUpdate=function(){if(this.isShaking){var t=(h.totalTime-this.oldTime)/1e3,i=1.6*Math.sin(12*Math.PI*t);this.shakeType===r.TOP?this.node.setPosition(this.oldPos.x,this.oldPos.y-i):this.shakeType===r.BOTTOM?this.node.setPosition(this.oldPos.x,this.oldPos.y+i):this.shakeType===r.LEFT?this.node.setPosition(this.oldPos.x-i,this.oldPos.y):this.shakeType===r.RIGHT&&this.node.setPosition(this.oldPos.x+i,this.oldPos.y),t>.2&&(this.isShaking=!1,this.node.setPosition(this.oldPos.x,this.oldPos.y))}},e}(a))||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerStateMachine.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./index3.ts","./EntityManager.ts","./StateMachine.ts","./IdleSubStateMachine2.ts","./AttackSubStateMachine.ts","./TurnRightSubStateMachine.ts","./TurnLeftSubStateMachine.ts","./DeathSubStateMachine2.ts","./AirDeathSubStateMachine.ts","./BlockFrontSubStateMachine.ts","./BlockRightSubStateMachine.ts","./BlockTurnLeftSubStateMachine.ts","./BlockBackSubStateMachine.ts","./BlockTurnRightSubStateMachine.ts","./BlockLeftSubStateMachine.ts"],(function(t){"use strict";var e,s,a,i,n,h,c,r,u,T,o,M,L,R,g,l,f,S,m,p,C,E,B;return{setters:[function(t){e=t.inheritsLoose,s=t.asyncToGenerator},function(t){a=t.cclegacy,i=t._decorator,n=t.Animation},function(t){h=t.ENTITY_STATE_ENUM,c=t.PARAMS_NAME_ENUM},function(t){r=t.EntityManager},function(t){u=t.getInitParamsTrigger,T=t.getInitParamsNumber,o=t.default},function(t){M=t.default},function(t){L=t.default},function(t){R=t.default},function(t){g=t.default},function(t){l=t.default},function(t){f=t.default},function(t){S=t.default},function(t){m=t.default},function(t){p=t.default},function(t){C=t.default},function(t){E=t.default},function(t){B=t.default}],execute:function(){var K;a._RF.push({},"af8b7y6r9NKrrGXEKamsXtk","PlayerStateMachine",void 0);var A=i.ccclass;i.property,t("PlayerStateMachine",A("PlayerStateMachine")(K=function(t){function a(){return t.apply(this,arguments)||this}e(a,t);var i=a.prototype;return i.init=function(){var t=s(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.animationComponent=this.node.addComponent(n),this.initParams(),this.initStateMachines(),this.initAnimationEvent(),t.next=6,Promise.all(this.waitingList);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.initAnimationEvent=function(){var t=this;this.animationComponent.on(n.EventType.FINISHED,(function(){var e=t.animationComponent.defaultClip.name;["block","turn","attack"].some((function(t){return e.includes(t)}))&&(t.node.getComponent(r).state=h.IDLE)}))},i.initParams=function(){this.params.set(c.IDLE,u()),this.params.set(c.ATTACK,u()),this.params.set(c.TURNLEFT,u()),this.params.set(c.TURNRIGHT,u()),this.params.set(c.BLOCKFRONT,u()),this.params.set(c.BLOCKBACK,u()),this.params.set(c.BLOCKLEFT,u()),this.params.set(c.BLOCKRIGHT,u()),this.params.set(c.BLOCKTURNLEFT,u()),this.params.set(c.BLOCKTURNRIGHT,u()),this.params.set(c.DEATH,u()),this.params.set(c.AIRDEATH,u()),this.params.set(c.DIRECTION,T())},i.initStateMachines=function(){this.stateMachines.set(c.IDLE,new M(this)),this.stateMachines.set(c.TURNLEFT,new g(this)),this.stateMachines.set(c.TURNRIGHT,new R(this)),this.stateMachines.set(c.BLOCKFRONT,new S(this)),this.stateMachines.set(c.BLOCKBACK,new C(this)),this.stateMachines.set(c.BLOCKLEFT,new B(this)),this.stateMachines.set(c.BLOCKRIGHT,new m(this)),this.stateMachines.set(c.BLOCKTURNLEFT,new p(this)),this.stateMachines.set(c.BLOCKTURNRIGHT,new E(this)),this.stateMachines.set(c.ATTACK,new L(this)),this.stateMachines.set(c.DEATH,new l(this)),this.stateMachines.set(c.AIRDEATH,new f(this))},i.run=function(){switch(this.currentState){case this.stateMachines.get(c.IDLE):case this.stateMachines.get(c.ATTACK):case this.stateMachines.get(c.TURNLEFT):case this.stateMachines.get(c.TURNRIGHT):case this.stateMachines.get(c.BLOCKTURNLEFT):case this.stateMachines.get(c.BLOCKTURNRIGHT):case this.stateMachines.get(c.BLOCKFRONT):case this.stateMachines.get(c.BLOCKBACK):case this.stateMachines.get(c.BLOCKLEFT):case this.stateMachines.get(c.BLOCKRIGHT):case this.stateMachines.get(c.DEATH):case this.stateMachines.get(c.AIRDEATH):this.params.get(c.DEATH).value?this.currentState=this.stateMachines.get(c.DEATH):this.params.get(c.AIRDEATH).value?this.currentState=this.stateMachines.get(c.AIRDEATH):this.params.get(c.TURNLEFT).value?this.currentState=this.stateMachines.get(c.TURNLEFT):this.params.get(c.TURNRIGHT).value?this.currentState=this.stateMachines.get(c.TURNRIGHT):this.params.get(c.BLOCKFRONT).value?this.currentState=this.stateMachines.get(c.BLOCKFRONT):this.params.get(c.BLOCKBACK).value?this.currentState=this.stateMachines.get(c.BLOCKBACK):this.params.get(c.BLOCKLEFT).value?this.currentState=this.stateMachines.get(c.BLOCKLEFT):this.params.get(c.BLOCKRIGHT).value?this.currentState=this.stateMachines.get(c.BLOCKRIGHT):this.params.get(c.BLOCKTURNLEFT).value?this.currentState=this.stateMachines.get(c.BLOCKTURNLEFT):this.params.get(c.BLOCKTURNRIGHT).value?this.currentState=this.stateMachines.get(c.BLOCKTURNRIGHT):this.params.get(c.ATTACK).value?this.currentState=this.stateMachines.get(c.ATTACK):this.params.get(c.IDLE).value?this.currentState=this.stateMachines.get(c.IDLE):this.currentState=this.currentState;break;default:this.currentState=this.stateMachines.get(c.IDLE)}},a}(o))||K);a._RF.pop()}}}));

System.register("chunks:///_virtual/DoorStateMachine.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./index3.ts","./StateMachine.ts","./DeathSubStateMachine.ts","./IdleSubStateMachine4.ts"],(function(t){"use strict";var e,n,i,a,s,r,c,o,h,u,f;return{setters:[function(t){e=t.inheritsLoose,n=t.asyncToGenerator},function(t){i=t.cclegacy,a=t._decorator,s=t.Animation},function(t){r=t.PARAMS_NAME_ENUM},function(t){c=t.getInitParamsTrigger,o=t.getInitParamsNumber,h=t.default},function(t){u=t.default},function(t){f=t.default}],execute:function(){var p;i._RF.push({},"affe7BshsJIJJp5jesrLCoH","DoorStateMachine",void 0);var m=a.ccclass;t("DoorStateMachine",m("DoorStateMachine")(p=function(t){function i(){return t.apply(this,arguments)||this}e(i,t);var a=i.prototype;return a.init=function(){var t=n(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.animationComponent=this.node.addComponent(s),this.initParams(),this.initStateMachines(),this.initAnimationEvent(),t.next=6,Promise.all(this.waitingList);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),a.initAnimationEvent=function(){},a.initParams=function(){this.params.set(r.IDLE,c()),this.params.set(r.DEATH,c()),this.params.set(r.DIRECTION,o())},a.initStateMachines=function(){this.stateMachines.set(r.IDLE,new f(this)),this.stateMachines.set(r.DEATH,new u(this))},a.run=function(){switch(this.currentState){case this.stateMachines.get(r.IDLE):case this.stateMachines.get(r.DEATH):this.params.get(r.DEATH).value?this.currentState=this.stateMachines.get(r.DEATH):this.params.get(r.IDLE).value?this.currentState=this.stateMachines.get(r.IDLE):this.currentState=this.currentState;break;default:this.currentState=this.stateMachines.get(r.IDLE)}},i}(h))||p);i._RF.pop()}}}));

System.register("chunks:///_virtual/DeathSubStateMachine4.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./index3.ts","./DirectionSubStateMachine.ts","./State.ts"],(function(t){"use strict";var e,n,s,a,i;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){s=t.DIRECTION_ENUM},function(t){a=t.default},function(t){i=t.default}],execute:function(){n._RF.push({},"bd1a36HO0hEZYiCmbb4hdsS","DeathSubStateMachine",void 0);var c="texture/door/death";t("default",function(t){function n(e){var n;return(n=t.call(this,e)||this).stateMachines.set(s.TOP,new i(e,""+c)),n.stateMachines.set(s.BOTTOM,new i(e,""+c)),n.stateMachines.set(s.LEFT,new i(e,""+c)),n.stateMachines.set(s.RIGHT,new i(e,""+c)),n}return e(n,t),n}(a));n._RF.pop()}}}));

System.register("chunks:///_virtual/SpikesThreeSubStateMachine.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./index3.ts","./State.ts","./SpikesSubStateMachine.ts"],(function(e){"use strict";var t,s,n,i,u;return{setters:[function(e){t=e.inheritsLoose},function(e){s=e.cclegacy},function(e){n=e.SPIKES_COUNT_ENUM},function(e){i=e.default},function(e){u=e.default}],execute:function(){s._RF.push({},"c46f8exu2RF8qwIi04u5ENM","SpikesThreeSubStateMachine",void 0);var a="texture/spikes/spikesthree";e("default",function(e){function s(t){var s;return(s=e.call(this,t)||this).stateMachines.set(n.ZERO,new i(t,a+"/zero")),s.stateMachines.set(n.ONE,new i(t,a+"/one")),s.stateMachines.set(n.TWO,new i(t,a+"/two")),s.stateMachines.set(n.THREE,new i(t,a+"/three")),s.stateMachines.set(n.FOUR,new i(t,a+"/four")),s}return t(s,e),s}(u));s._RF.pop()}}}));

System.register("chunks:///_virtual/TurnRightSubStateMachine.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./index3.ts","./DirectionSubStateMachine.ts","./State.ts"],(function(t){"use strict";var e,n,i,s,u;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){i=t.DIRECTION_ENUM},function(t){s=t.default},function(t){u=t.default}],execute:function(){n._RF.push({},"c6610G/Sc1MPY5kaXWx4DW+","TurnRightSubStateMachine",void 0);var c="texture/player/turnright";t("default",function(t){function n(e){var n;return(n=t.call(this,e)||this).stateMachines.set(i.TOP,new u(e,c+"/top")),n.stateMachines.set(i.BOTTOM,new u(e,c+"/bottom")),n.stateMachines.set(i.LEFT,new u(e,c+"/left")),n.stateMachines.set(i.RIGHT,new u(e,c+"/right")),n}return e(n,t),n}(s));n._RF.pop()}}}));

System.register("chunks:///_virtual/IdleSubStateMachine3.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./index3.ts","./DirectionSubStateMachine.ts","./State.ts"],(function(t){"use strict";var e,n,o,i,a,s;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t.AnimationClip},function(t){i=t.DIRECTION_ENUM},function(t){a=t.default},function(t){s=t.default}],execute:function(){n._RF.push({},"c7ea4vP0ZhDNKtFE30bVa5r","IdleSubStateMachine",void 0);var c="texture/ironskeleton/idle";t("default",function(t){function n(e){var n;return(n=t.call(this,e)||this).stateMachines.set(i.TOP,new s(e,c+"/top",o.WrapMode.Loop)),n.stateMachines.set(i.BOTTOM,new s(e,c+"/bottom",o.WrapMode.Loop)),n.stateMachines.set(i.LEFT,new s(e,c+"/left",o.WrapMode.Loop)),n.stateMachines.set(i.RIGHT,new s(e,c+"/right",o.WrapMode.Loop)),n}return e(n,t),n}(a));n._RF.pop()}}}));

System.register("chunks:///_virtual/level11.ts",["cc","./index3.ts"],(function(t){"use strict";var L,e,O,y,c;return{setters:[function(t){L=t.cclegacy},function(t){e=t.TILE_TYPE_ENUM,O=t.DIRECTION_ENUM,y=t.ENTITY_STATE_ENUM,c=t.ENTITY_TYPE_ENUM}],execute:function(){L._RF.push({},"cabcbKUZiVAmrbj26aleYra","level11",void 0);var s=[[{src:16,type:e.WALL_LEFT_TOP},{src:5,type:e.WALL_COLUMN},{src:23,type:e.WALL_RIGHT_BOTTOM},{src:1,type:e.FLOOR},{src:22,type:e.WALL_RIGHT_TOP},{src:13,type:e.WALL_LEFT_BOTTOM},{src:18,type:e.CLIFF_LEFT}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:24,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:null,type:null},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_CENTER},{src:1,type:e.FLOOR},{src:22,type:e.WALL_RIGHT_TOP},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:24,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:15,type:e.WALL_RIGHT_TOP},{src:23,type:e.WALL_RIGHT_BOTTOM},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_CENTER},{src:null,type:null},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:22,type:e.WALL_RIGHT_TOP},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:14,type:e.WALL_RIGHT_BOTTOM},{src:19,type:e.CLIFF_RIGHT}]],r={x:0,y:3,direction:O.RIGHT,state:y.IDLE,type:c.PLAYER},p=[{x:4,y:2,direction:O.LEFT,state:y.IDLE,type:c.SKELETON_WOODEN},{x:6,y:1,direction:O.LEFT,state:y.IDLE,type:c.SKELETON_IRON},{x:9,y:1,direction:O.LEFT,state:y.IDLE,type:c.SKELETON_IRON}],R=[{x:4,y:1,type:c.SPIKES_THREE,count:0},{x:6,y:3,type:c.SPIKES_TWO,count:0}],_=[{x:3,y:3,state:y.IDLE,type:c.BURST,direction:O.TOP},{x:3,y:4,state:y.IDLE,type:c.BURST,direction:O.TOP},{x:5,y:2,state:y.IDLE,type:c.BURST,direction:O.TOP},{x:8,y:3,state:y.IDLE,type:c.BURST,direction:O.TOP},{x:8,y:4,state:y.IDLE,type:c.BURST,direction:O.TOP}],T={x:9,y:0,direction:O.BOTTOM,state:y.IDLE,type:c.DOOR};t("default",{mapInfo:s,player:r,enemies:p,spikes:R,bursts:_,door:T});L._RF.pop()}}}));

System.register("chunks:///_virtual/IdleSubStateMachine4.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./index3.ts","./DirectionSubStateMachine.ts","./State.ts"],(function(t){"use strict";var e,n,s,i,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){s=t.DIRECTION_ENUM},function(t){i=t.default},function(t){c=t.default}],execute:function(){n._RF.push({},"cbd34mDWIlKzpdLYgdIHQFe","IdleSubStateMachine",void 0);var u="texture/door/idle";t("default",function(t){function n(e){var n;return(n=t.call(this,e)||this).stateMachines.set(s.TOP,new c(e,u+"/top")),n.stateMachines.set(s.BOTTOM,new c(e,u+"/top")),n.stateMachines.set(s.LEFT,new c(e,u+"/left")),n.stateMachines.set(s.RIGHT,new c(e,u+"/left")),n}return e(n,t),n}(i));n._RF.pop()}}}));

System.register("chunks:///_virtual/TileManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./index3.ts"],(function(t){"use strict";var e,n,i,r,s,o,a,c,p,u;return{setters:[function(t){e=t.inheritsLoose,n=t.defineProperty,i=t.assertThisInitialized,r=t.asyncToGenerator},function(t){s=t.cclegacy,o=t._decorator,a=t.Component,c=t.UITransform,p=t.Sprite},function(t){u=t.TILE_TYPE_ENUM}],execute:function(){var h;s._RF.push({},"cc8883gQjNI2ImNd1sdroO/","TileManager",void 0);var l=o.ccclass,T=t("TILE_WIDTH",55),L=t("TILE_HEIGHT",55);t("TileManager",l("TileManager")(h=function(t){function s(){for(var e,r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return e=t.call.apply(t,[this].concat(s))||this,n(i(e),"type",void 0),n(i(e),"moveable",void 0),n(i(e),"turnable",void 0),e}return e(s,t),s.prototype.init=function(){var t=r(regeneratorRuntime.mark((function t(e,n,i,r){var s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.type=e,this.type===u.WALL_LEFT_TOP||this.type===u.WALL_ROW||this.type===u.WALL_RIGHT_TOP||this.type===u.WALL_LEFT_BOTTOM||this.type===u.WALL_RIGHT_BOTTOM||this.type===u.WALL_COLUMN?(this.moveable=!1,this.turnable=!1):this.type===u.CLIFF_LEFT||this.type===u.CLIFF_CENTER||this.type===u.CLIFF_RIGHT?(this.moveable=!1,this.turnable=!0):this.type===u.FLOOR&&(this.moveable=!0,this.turnable=!0),s=this.getComponent(c),this.node.addComponent(p).spriteFrame=n,s.setContentSize(T,L),this.node.setPosition(i*T,-r*L);case 7:case"end":return t.stop()}}),t,this)})));return function(e,n,i,r){return t.apply(this,arguments)}}(),s}(a))||h);s._RF.pop()}}}));

System.register("chunks:///_virtual/level19.ts",["cc","./index3.ts"],(function(L){"use strict";var t,e,s,y,c;return{setters:[function(L){t=L.cclegacy},function(L){e=L.TILE_TYPE_ENUM,s=L.DIRECTION_ENUM,y=L.ENTITY_STATE_ENUM,c=L.ENTITY_TYPE_ENUM}],execute:function(){t._RF.push({},"cd23ae9UTxF3pvk4LzNHLrd","level19",void 0);var r=[[{src:20,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:20,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:16,type:e.WALL_LEFT_TOP},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:13,type:e.WALL_LEFT_BOTTOM},{src:18,type:e.CLIFF_LEFT}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_CENTER},{src:null,type:null},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:15,type:e.WALL_RIGHT_TOP},{src:5,type:e.WALL_COLUMN},{src:14,type:e.WALL_RIGHT_BOTTOM},{src:1,type:e.FLOOR},{src:16,type:e.WALL_LEFT_TOP},{src:5,type:e.WALL_COLUMN},{src:13,type:e.WALL_LEFT_BOTTOM},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:19,type:e.CLIFF_RIGHT}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:15,type:e.WALL_RIGHT_TOP},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:14,type:e.WALL_RIGHT_BOTTOM},{src:19,type:e.CLIFF_RIGHT},{src:21,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:21,type:e.WALL_ROW},{src:19,type:e.CLIFF_RIGHT}]],O={x:0,y:1,direction:s.RIGHT,state:y.IDLE,type:c.PLAYER},p=[{x:2,y:5,direction:s.TOP,state:y.IDLE,type:c.SKELETON_WOODEN},{x:4,y:9,direction:s.TOP,state:y.IDLE,type:c.SKELETON_WOODEN}],_=[{x:1,y:5,state:y.IDLE,type:c.BURST,direction:s.TOP},{x:1,y:6,state:y.IDLE,type:c.BURST,direction:s.TOP},{x:1,y:7,state:y.IDLE,type:c.BURST,direction:s.TOP},{x:1,y:8,state:y.IDLE,type:c.BURST,direction:s.TOP},{x:1,y:9,state:y.IDLE,type:c.BURST,direction:s.TOP},{x:2,y:6,state:y.IDLE,type:c.BURST,direction:s.TOP},{x:2,y:7,state:y.IDLE,type:c.BURST,direction:s.TOP}],R={x:6,y:9,direction:s.LEFT,state:y.IDLE,type:c.DOOR};L("default",{mapInfo:r,player:O,enemies:p,spikes:[],bursts:_,door:R});t._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./index3.ts","./DataManager.ts","./EventManager.ts","./EntityManager.ts","./PlayerStateMachine.ts"],(function(t){"use strict";var i,e,r,n,s,a,o,u,T,l,h,v,f,O,E;return{setters:[function(t){i=t.inheritsLoose,e=t.defineProperty,r=t.assertThisInitialized,n=t.asyncToGenerator},function(t){s=t.cclegacy,a=t._decorator},function(t){o=t.EVENT_ENUM,u=t.ENTITY_STATE_ENUM,T=t.CONTROLLER_ENUM,l=t.SHAKE_TYPE_ENUM,h=t.DIRECTION_ENUM},function(t){v=t.default},function(t){f=t.default},function(t){O=t.EntityManager},function(t){E=t.PlayerStateMachine}],execute:function(){var d;s._RF.push({},"d061bV0s7dMvL4lQmXdfLpY","PlayerManager",void 0);var c=a.ccclass;t("PlayerManager",c("PlayerManager")(d=function(t){function s(){for(var i,n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return i=t.call.apply(t,[this].concat(s))||this,e(r(i),"speed",.1),e(r(i),"targetX",void 0),e(r(i),"targetY",void 0),e(r(i),"isMoving",!1),i}i(s,t);var a=s.prototype;return a.init=function(){var i=n(regeneratorRuntime.mark((function i(e){return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return this.fsm=this.addComponent(E),i.next=3,this.fsm.init();case 3:t.prototype.init.call(this,e),this.targetX=this.x,this.targetY=this.y,f.Instance.on(o.PLAYER_CTRL,this.inputProcess,this),f.Instance.on(o.ATTACK_PLAYER,this.onDead,this);case 8:case"end":return i.stop()}}),i,this)})));return function(t){return i.apply(this,arguments)}}(),a.onDestroy=function(){t.prototype.onDestroy.call(this),f.Instance.off(o.PLAYER_CTRL,this.inputProcess),f.Instance.off(o.ATTACK_PLAYER,this.onDead)},a.update=function(){this.updateXY(),t.prototype.update.call(this)},a.updateXY=function(){this.targetX<this.x?this.x-=this.speed:this.targetX>this.x&&(this.x+=this.speed),this.targetY<this.y?this.y-=this.speed:this.targetY>this.y&&(this.y+=this.speed),Math.abs(this.targetX-this.x)<.01&&Math.abs(this.targetY-this.y)<.01&&this.isMoving&&(this.x=this.targetX,this.y=this.targetY,this.isMoving=!1,f.Instance.emit(o.PLAYER_MOVE_END))},a.onDead=function(t){this.state=t},a.onAttackShake=function(t){f.Instance.emit(o.SCREEN_SHAKE,t)},a.inputProcess=function(t){if(!this.isMoving&&this.state!==u.DEATH&&this.state!==u.AIRDEATH&&this.state!==u.ATTACK){var i=this.willAttack(t);if(i)return f.Instance.emit(o.RECORD_STEP),this.state=u.ATTACK,f.Instance.emit(o.ATTACK_ENEMY,i),f.Instance.emit(o.PLAYER_MOVE_END),void f.Instance.emit(o.DOOR_OPEN);this.willBlock(t)?t===T.TOP?f.Instance.emit(o.SCREEN_SHAKE,l.TOP):t===T.BOTTOM?f.Instance.emit(o.SCREEN_SHAKE,l.BOTTOM):t===T.LEFT?f.Instance.emit(o.SCREEN_SHAKE,l.LEFT):t===T.RIGHT?f.Instance.emit(o.SCREEN_SHAKE,l.RIGHT):t===T.TURNLEFT&&this.direction===h.TOP?f.Instance.emit(o.SCREEN_SHAKE,l.LEFT):t===T.TURNLEFT&&this.direction===h.LEFT?f.Instance.emit(o.SCREEN_SHAKE,l.BOTTOM):t===T.TURNLEFT&&this.direction===h.BOTTOM?f.Instance.emit(o.SCREEN_SHAKE,l.RIGHT):t===T.TURNLEFT&&this.direction===h.RIGHT?f.Instance.emit(o.SCREEN_SHAKE,l.TOP):t===T.TURNRIGHT&&this.direction===h.TOP?f.Instance.emit(o.SCREEN_SHAKE,l.RIGHT):t===T.TURNRIGHT&&this.direction===h.LEFT?f.Instance.emit(o.SCREEN_SHAKE,l.TOP):t===T.TURNRIGHT&&this.direction===h.BOTTOM?f.Instance.emit(o.SCREEN_SHAKE,l.LEFT):t===T.TURNRIGHT&&this.direction===h.RIGHT&&f.Instance.emit(o.SCREEN_SHAKE,l.BOTTOM):this.move(t)}},a.move=function(t){f.Instance.emit(o.RECORD_STEP),t===T.TOP?(this.targetY-=1,this.isMoving=!0,this.showSmoke(h.TOP)):t===T.BOTTOM?(this.targetY+=1,this.isMoving=!0,this.showSmoke(h.BOTTOM)):t===T.LEFT?(this.targetX-=1,this.isMoving=!0,this.showSmoke(h.LEFT)):t===T.RIGHT?(this.targetX+=1,this.isMoving=!0,this.showSmoke(h.RIGHT)):t===T.TURNLEFT?(this.direction===h.TOP?this.direction=h.LEFT:this.direction===h.BOTTOM?this.direction=h.RIGHT:this.direction===h.LEFT?this.direction=h.BOTTOM:this.direction===h.RIGHT&&(this.direction=h.TOP),this.state=u.TURNLEFT,f.Instance.emit(o.PLAYER_MOVE_END)):t===T.TURNRIGHT&&(this.direction===h.TOP?this.direction=h.RIGHT:this.direction===h.BOTTOM?this.direction=h.LEFT:this.direction===h.LEFT?this.direction=h.TOP:this.direction===h.RIGHT&&(this.direction=h.BOTTOM),this.state=u.TURNRIGHT,f.Instance.emit(o.PLAYER_MOVE_END))},a.showSmoke=function(t){f.Instance.emit(o.SHOW_SMOKE,this.x,this.y,t)},a.willAttack=function(t){for(var i=v.Instance.enemies.filter((function(t){return t.state!==u.DEATH})),e=0;e<i.length;e++){var r=i[e],n=r.x,s=r.y,a=r.id;if(this.direction===h.TOP&&t===T.TOP&&s===this.targetY-2&&n===this.x)return a;if(this.direction===h.BOTTOM&&t===T.BOTTOM&&s===this.targetY+2&&n===this.x)return a;if(this.direction===h.LEFT&&t===T.LEFT&&n===this.targetX-2&&s===this.y)return a;if(this.direction===h.RIGHT&&t===T.RIGHT&&n===this.targetX+2&&s===this.y)return a}return""},a.willBlock=function(t){var i=this.targetX,e=this.targetY,r=this.direction,n=v.Instance.tileInfo,s=v.Instance.enemies.filter((function(t){return t.state!==u.DEATH})),a=v.Instance.door||{},o=a.x,l=a.y,f=a.state,O=v.Instance.bursts.filter((function(t){return t.state!==u.DEATH})),E=v.Instance,d=E.mapRowCount,c=E.mapColumnCount;if(t===T.TOP){var L=e-1;if(r===h.TOP){var R,C;if(L<0)return this.state=u.BLOCKFRONT,!0;var B=e-2,K=null===(R=n[i])||void 0===R?void 0:R[L],H=null===(C=n[i])||void 0===C?void 0:C[B];if((o===i&&l===L||o===i&&l===B)&&f!==u.DEATH)return this.state=u.BLOCKFRONT,!0;for(var I=0;I<s.length;I++){var A=s[I],m=A.x,N=A.y;if(m===i&&N===B||m===i&&N===L)return this.state=u.BLOCKFRONT,!0}if(O.some((function(t){return t.x===i&&t.y===L}))&&(!H||H.turnable))return!1;if(!K||!K.moveable||H&&!H.turnable)return this.state=u.BLOCKFRONT,!0}else if(r===h.BOTTOM){var y,F;if(L<0)return this.state=u.BLOCKBACK,!0;var g=e,b=null===(y=n[i])||void 0===y?void 0:y[L],M=null===(F=n[i])||void 0===F?void 0:F[g];if((o===i&&l===L||o===i&&l===g)&&f!==u.DEATH)return this.state=u.BLOCKBACK,!0;for(var x=0;x<s.length;x++){var G=s[x],P=G.x,_=G.y;if(P===i&&_===L)return this.state=u.BLOCKBACK,!0}if(O.some((function(t){return t.x===i&&t.y===L}))&&(!M||M.turnable))return!1;if(!b||!b.moveable||M&&!M.turnable)return this.state=u.BLOCKBACK,!0}else if(r===h.LEFT){var S,p;if(L<0)return this.state=u.BLOCKRIGHT,!0;var D=i-1,U=e-1,Y=null===(S=n[i])||void 0===S?void 0:S[L],X=null===(p=n[D])||void 0===p?void 0:p[U];if((o===i&&l===L||o===D&&l===U)&&f!==u.DEATH)return this.state=u.BLOCKRIGHT,!0;for(var k=0;k<s.length;k++){var w=s[k],V=w.x,j=w.y;if(V===i&&j===L||V===D&&j===U)return this.state=u.BLOCKRIGHT,!0}if(O.some((function(t){return t.x===i&&t.y===L}))&&(!X||X.turnable))return!1;if(!Y||!Y.moveable||X&&!X.turnable)return this.state=u.BLOCKRIGHT,!0}else if(r===h.RIGHT){var z,Q;if(L<0)return this.state=u.BLOCKLEFT,!0;var W=i+1,q=e-1,J=null===(z=n[i])||void 0===z?void 0:z[L],Z=null===(Q=n[W])||void 0===Q?void 0:Q[q];if((o===i&&l===L||o===W&&l===q)&&f!==u.DEATH)return this.state=u.BLOCKLEFT,!0;for(var $=0;$<s.length;$++){var tt=s[$],it=tt.x,et=tt.y;if(it===i&&et===L||it===W&&et===q)return this.state=u.BLOCKLEFT,!0}if(O.some((function(t){return t.x===i&&t.y===L}))&&(!Z||Z.turnable))return!1;if(!J||!J.moveable||Z&&!Z.turnable)return this.state=u.BLOCKLEFT,!0}}else if(t===T.BOTTOM){var rt=e+1;if(r===h.TOP){var nt,st;if(rt>c-1)return this.state=u.BLOCKBACK,!0;var at=e,ot=null===(nt=n[i])||void 0===nt?void 0:nt[rt],ut=null===(st=n[i])||void 0===st?void 0:st[at];if((o===i&&l===rt||o===i&&l===at)&&f!==u.DEATH)return this.state=u.BLOCKBACK,!0;for(var Tt=0;Tt<s.length;Tt++){var lt=s[Tt],ht=lt.x,vt=lt.y;if(ht===i&&vt===rt)return this.state=u.BLOCKBACK,!0}if(O.some((function(t){return t.x===i&&t.y===rt}))&&(!ut||ut.turnable))return!1;if(!ot||!ot.moveable||ut&&!ut.turnable)return this.state=u.BLOCKBACK,!0}else if(r===h.BOTTOM){var ft,Ot;if(rt>c-1)return this.state=u.BLOCKFRONT,!0;var Et=e+2,dt=null===(ft=n[i])||void 0===ft?void 0:ft[rt],ct=null===(Ot=n[i])||void 0===Ot?void 0:Ot[Et];if((o===i&&l===rt||o===i&&l===Et)&&f!==u.DEATH)return this.state=u.BLOCKFRONT,!0;for(var Lt=0;Lt<s.length;Lt++){var Rt=s[Lt],Ct=Rt.x,Bt=Rt.y;if(Ct===i&&Bt===Et||Ct===i&&Bt===rt)return this.state=u.BLOCKFRONT,!0}if(O.some((function(t){return t.x===i&&t.y===rt}))&&(!ct||ct.turnable))return!1;if(!dt||!dt.moveable||ct&&!ct.turnable)return this.state=u.BLOCKFRONT,!0}else if(r===h.LEFT){var Kt,Ht;if(rt>c-1)return this.state=u.BLOCKLEFT,!0;var It=i-1,At=e+1,mt=null===(Kt=n[i])||void 0===Kt?void 0:Kt[rt],Nt=null===(Ht=n[It])||void 0===Ht?void 0:Ht[At];if((o===i&&l===rt||o===It&&l===At)&&f!==u.DEATH)return this.state=u.BLOCKLEFT,!0;for(var yt=0;yt<s.length;yt++){var Ft=s[yt],gt=Ft.x,bt=Ft.y;if(gt===i&&bt===rt||gt===It&&bt===At)return this.state=u.BLOCKLEFT,!0}if(O.some((function(t){return t.x===i&&t.y===rt}))&&(!Nt||Nt.turnable))return!1;if(!mt||!mt.moveable||Nt&&!Nt.turnable)return this.state=u.BLOCKLEFT,!0}else if(r===h.RIGHT){var Mt,xt;if(rt>c-1)return this.state=u.BLOCKRIGHT,!0;var Gt=i+1,Pt=e+1,_t=null===(Mt=n[i])||void 0===Mt?void 0:Mt[rt],St=null===(xt=n[Gt])||void 0===xt?void 0:xt[Pt];if((o===i&&l===rt||o===Gt&&l===Pt)&&f!==u.DEATH)return this.state=u.BLOCKRIGHT,!0;for(var pt=0;pt<s.length;pt++){var Dt=s[pt],Ut=Dt.x,Yt=Dt.y;if(Ut===i&&Yt===rt||Ut===Gt&&Yt===Pt)return this.state=u.BLOCKRIGHT,!0}if(O.some((function(t){return t.x===i&&t.y===rt}))&&(!St||St.turnable))return!1;if(!_t||!_t.moveable||St&&!St.turnable)return this.state=u.BLOCKRIGHT,!0}}else if(t===T.LEFT){var Xt=i-1;if(r===h.TOP){var kt,wt;if(Xt<0)return this.state=u.BLOCKLEFT,!0;var Vt=i-1,jt=e-1,zt=null===(kt=n[Xt])||void 0===kt?void 0:kt[e],Qt=null===(wt=n[Vt])||void 0===wt?void 0:wt[jt];if((o===Xt&&l===e||o===Vt&&l===jt)&&f!==u.DEATH)return this.state=u.BLOCKLEFT,!0;for(var Wt=0;Wt<s.length;Wt++){var qt=s[Wt],Jt=qt.x,Zt=qt.y;if(Jt===Xt&&Zt===e||Jt===Vt&&Zt===jt)return this.state=u.BLOCKLEFT,!0}if(O.some((function(t){return t.x===Xt&&t.y===e}))&&(!Qt||Qt.turnable))return!1;if(!zt||!zt.moveable||Qt&&!Qt.turnable)return this.state=u.BLOCKLEFT,!0}else if(r===h.BOTTOM){var $t,ti;if(Xt<0)return this.state=u.BLOCKRIGHT,!0;var ii=i-1,ei=e+1,ri=null===($t=n[Xt])||void 0===$t?void 0:$t[e],ni=null===(ti=n[ii])||void 0===ti?void 0:ti[ei];if((o===Xt&&l===e||o===ii&&l===ei)&&f!==u.DEATH)return this.state=u.BLOCKRIGHT,!0;for(var si=0;si<s.length;si++){var ai=s[si],oi=ai.x,ui=ai.y;if(oi===Xt&&ui===e||oi===ii&&ui===ei)return this.state=u.BLOCKRIGHT,!0}if(O.some((function(t){return t.x===Xt&&t.y===e}))&&(!ni||ni.turnable))return!1;if(!ri||!ri.moveable||ni&&!ni.turnable)return this.state=u.BLOCKRIGHT,!0}else if(r===h.LEFT){var Ti,li;if(Xt<0)return this.state=u.BLOCKFRONT,!0;var hi=i-2,vi=null===(Ti=n[Xt])||void 0===Ti?void 0:Ti[e],fi=null===(li=n[hi])||void 0===li?void 0:li[e];if((o===Xt&&l===e||o===hi&&l===e)&&f!==u.DEATH)return this.state=u.BLOCKFRONT,!0;for(var Oi=0;Oi<s.length;Oi++){var Ei=s[Oi],di=Ei.x,ci=Ei.y;if(di===Xt&&ci===e||di===hi&&ci===e)return this.state=u.BLOCKFRONT,!0}if(O.some((function(t){return t.x===Xt&&t.y===e}))&&(!fi||fi.turnable))return!1;if(!vi||!vi.moveable||fi&&!fi.turnable)return this.state=u.BLOCKFRONT,!0}else if(r===h.RIGHT){var Li,Ri;if(Xt<0)return this.state=u.BLOCKBACK,!0;var Ci=i,Bi=null===(Li=n[Xt])||void 0===Li?void 0:Li[e],Ki=null===(Ri=n[Ci])||void 0===Ri?void 0:Ri[e];if((o===Xt&&l===e||o===Ci&&l===e)&&f!==u.DEATH)return this.state=u.BLOCKBACK,!0;for(var Hi=0;Hi<s.length;Hi++){var Ii=s[Hi],Ai=Ii.x,mi=Ii.y;if(Ai===Xt&&mi===e)return this.state=u.BLOCKBACK,!0}if(O.some((function(t){return t.x===Xt&&t.y===e}))&&(!Ki||Ki.turnable))return!1;if(!Bi||!Bi.moveable||Ki&&!Ki.turnable)return this.state=u.BLOCKBACK,!0}}else if(t===T.RIGHT){var Ni=i+1;if(r===h.TOP){var yi,Fi;if(Ni>d-1)return this.state=u.BLOCKRIGHT,!0;var gi=i+1,bi=e-1,Mi=null===(yi=n[Ni])||void 0===yi?void 0:yi[e],xi=null===(Fi=n[gi])||void 0===Fi?void 0:Fi[bi];if((o===Ni&&l===e||o===gi&&l===bi)&&f!==u.DEATH)return this.state=u.BLOCKRIGHT,!0;for(var Gi=0;Gi<s.length;Gi++){var Pi=s[Gi],_i=Pi.x,Si=Pi.y;if(_i===Ni&&Si===e||_i===gi&&Si===bi)return this.state=u.BLOCKRIGHT,!0}if(O.some((function(t){return t.x===Ni&&t.y===e}))&&(!xi||xi.turnable))return!1;if(!Mi||!Mi.moveable||xi&&!xi.turnable)return this.state=u.BLOCKRIGHT,!0}else if(r===h.BOTTOM){var pi,Di;if(Ni>d-1)return this.state=u.BLOCKLEFT,!0;var Ui=i+1,Yi=e+1,Xi=null===(pi=n[Ni])||void 0===pi?void 0:pi[e],ki=null===(Di=n[Ui])||void 0===Di?void 0:Di[Yi];if((o===Ni&&l===e||o===Ui&&l===Yi)&&f!==u.DEATH)return this.state=u.BLOCKLEFT,!0;for(var wi=0;wi<s.length;wi++){var Vi=s[wi],ji=Vi.x,zi=Vi.y;if(ji===Ni&&zi===e||ji===Ui&&zi===Yi)return this.state=u.BLOCKLEFT,!0}if(O.some((function(t){return t.x===Ni&&t.y===e}))&&(!ki||ki.turnable))return!1;if(!Xi||!Xi.moveable||ki&&!ki.turnable)return this.state=u.BLOCKLEFT,!0}else if(r===h.LEFT){var Qi,Wi;if(Ni>d-1)return this.state=u.BLOCKBACK,!0;var qi=i,Ji=null===(Qi=n[Ni])||void 0===Qi?void 0:Qi[e],Zi=null===(Wi=n[qi])||void 0===Wi?void 0:Wi[e];if((o===Ni&&l===e||o===qi&&l===e)&&f!==u.DEATH)return this.state=u.BLOCKBACK,!0;for(var $i=0;$i<s.length;$i++){var te=s[$i],ie=te.x,ee=te.y;if(ie===Ni&&ee===e)return this.state=u.BLOCKBACK,!0}if(O.some((function(t){return t.x===Ni&&t.y===e}))&&(!Zi||Zi.turnable))return!1;if(!Ji||!Ji.moveable||Zi&&!Zi.turnable)return this.state=u.BLOCKBACK,!0}else if(r===h.RIGHT){var re,ne;if(Ni>d-1)return this.state=u.BLOCKFRONT,!0;var se=i+2,ae=null===(re=n[Ni])||void 0===re?void 0:re[e],oe=null===(ne=n[se])||void 0===ne?void 0:ne[e];if((o===Ni&&l===e||o===se&&l===e)&&f!==u.DEATH)return this.state=u.BLOCKFRONT,!0;for(var ue=0;ue<s.length;ue++){var Te=s[ue],le=Te.x,he=Te.y;if(le===Ni&&he===e||le===se&&he===e)return this.state=u.BLOCKFRONT,!0}if(O.some((function(t){return t.x===Ni&&t.y===e}))&&(!oe||oe.turnable))return!1;if(!ae||!ae.moveable||oe&&!oe.turnable)return this.state=u.BLOCKFRONT,!0}}else if(t===T.TURNLEFT){var ve,fe,Oe,Ee,de,ce,Le,Re;if(r===h.TOP?(Le=e-1,Re=i-1):r===h.BOTTOM?(Le=e+1,Re=i+1):r===h.LEFT?(Le=e+1,Re=i-1):r===h.RIGHT&&(Le=e-1,Re=i+1),(o===i&&l===Le||o===Re&&l===e||o===Re&&l===Le)&&f!==u.DEATH)return this.state=u.BLOCKTURNLEFT,!0;for(var Ce=0;Ce<s.length;Ce++){var Be=s[Ce],Ke=Be.x,He=Be.y;if(Ke===Re&&He===e)return this.state=u.BLOCKTURNLEFT,!0;if(Ke===Re&&He===Le)return this.state=u.BLOCKTURNLEFT,!0;if(Ke===i&&He===Le)return this.state=u.BLOCKTURNLEFT,!0}if((null===(ve=n[i])||void 0===ve?void 0:ve[Le])&&!(null===(fe=n[i])||void 0===fe?void 0:fe[Le].turnable)||(null===(Oe=n[Re])||void 0===Oe?void 0:Oe[e])&&!(null===(Ee=n[Re])||void 0===Ee?void 0:Ee[e].turnable)||(null===(de=n[Re])||void 0===de?void 0:de[Le])&&!(null===(ce=n[Re])||void 0===ce?void 0:ce[Le].turnable))return this.state=u.BLOCKTURNLEFT,!0}else if(t===T.TURNRIGHT){var Ie,Ae,me,Ne,ye,Fe,ge,be;if(r===h.TOP?(be=e-1,ge=i+1):r===h.BOTTOM?(be=e+1,ge=i-1):r===h.LEFT?(be=e-1,ge=i-1):r===h.RIGHT&&(be=e+1,ge=i+1),(o===i&&l===be||o===ge&&l===e||o===ge&&l===be)&&f!==u.DEATH)return this.state=u.BLOCKTURNRIGHT,!0;for(var Me=0;Me<s.length;Me++){var xe=s[Me],Ge=xe.x,Pe=xe.y;if(Ge===ge&&Pe===e)return this.state=u.BLOCKTURNRIGHT,!0;if(Ge===ge&&Pe===be)return this.state=u.BLOCKTURNRIGHT,!0;if(Ge===i&&Pe===be)return this.state=u.BLOCKTURNRIGHT,!0}if((null===(Ie=n[i])||void 0===Ie?void 0:Ie[be])&&!(null===(Ae=n[i])||void 0===Ae?void 0:Ae[be].turnable)||(null===(me=n[ge])||void 0===me?void 0:me[e])&&!(null===(Ne=n[ge])||void 0===Ne?void 0:Ne[e].turnable)||(null===(ye=n[ge])||void 0===ye?void 0:ye[be])&&!(null===(Fe=n[ge])||void 0===Fe?void 0:Fe[be].turnable))return this.state=u.BLOCKTURNRIGHT,!0}return!1},s}(O))||d);s._RF.pop()}}}));

System.register("chunks:///_virtual/level17.ts",["cc","./index3.ts"],(function(t){"use strict";var e,L,y,O,c;return{setters:[function(t){e=t.cclegacy},function(t){L=t.TILE_TYPE_ENUM,y=t.DIRECTION_ENUM,O=t.ENTITY_STATE_ENUM,c=t.ENTITY_TYPE_ENUM}],execute:function(){e._RF.push({},"d122a71xvNEyr+LGbMYMjkc","level17",void 0);var s=[[{src:20,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:22,type:L.WALL_LEFT_TOP},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:13,type:L.WALL_LEFT_BOTTOM},{src:18,type:L.CLIFF_LEFT}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:15,type:L.WALL_RIGHT_TOP},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:23,type:L.WALL_RIGHT_BOTTOM},{src:1,type:L.FLOOR},{src:21,type:L.WALL_ROW},{src:19,type:L.CLIFF_RIGHT}]],p={x:7,y:7,direction:y.LEFT,state:O.IDLE,type:c.PLAYER},r=[{x:2,y:1,direction:y.BOTTOM,state:O.IDLE,type:c.SKELETON_WOODEN},{x:2,y:4,direction:y.RIGHT,state:O.IDLE,type:c.SKELETON_WOODEN}],R=[{x:1,y:3,type:c.SPIKES_TWO,count:0},{x:3,y:3,type:c.SPIKES_TWO,count:0},{x:4,y:1,type:c.SPIKES_TWO,count:0},{x:4,y:4,type:c.SPIKES_TWO,count:0},{x:4,y:6,type:c.SPIKES_TWO,count:0},{x:5,y:3,type:c.SPIKES_TWO,count:0},{x:6,y:2,type:c.SPIKES_TWO,count:0},{x:6,y:6,type:c.SPIKES_TWO,count:0}],E=[{x:1,y:6,state:O.IDLE,type:c.BURST,direction:y.TOP},{x:2,y:6,state:O.IDLE,type:c.BURST,direction:y.TOP},{x:3,y:6,state:O.IDLE,type:c.BURST,direction:y.TOP},{x:4,y:2,state:O.IDLE,type:c.BURST,direction:y.TOP},{x:4,y:5,state:O.IDLE,type:c.BURST,direction:y.TOP},{x:5,y:4,state:O.IDLE,type:c.BURST,direction:y.TOP},{x:5,y:5,state:O.IDLE,type:c.BURST,direction:y.TOP},{x:6,y:5,state:O.IDLE,type:c.BURST,direction:y.TOP}],F={x:0,y:1,direction:y.LEFT,state:O.IDLE,type:c.DOOR};t("default",{mapInfo:s,player:p,enemies:r,spikes:R,bursts:E,door:F});e._RF.pop()}}}));

System.register("chunks:///_virtual/level9.ts",["cc","./index3.ts"],(function(t){"use strict";var L,e,O,y,s;return{setters:[function(t){L=t.cclegacy},function(t){e=t.TILE_TYPE_ENUM,O=t.DIRECTION_ENUM,y=t.ENTITY_STATE_ENUM,s=t.ENTITY_TYPE_ENUM}],execute:function(){L._RF.push({},"d8fb6qoSOlJu435XKQIOH9s","level9",void 0);var c=[[{src:20,type:e.WALL_LEFT_BOTTOM},{src:1,type:e.FLOOR},{src:22,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:13,type:e.WALL_LEFT_BOTTOM},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_CENTER},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:16,type:e.WALL_RIGHT_TOP},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:23,type:e.WALL_LEFT_BOTTOM},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_CENTER},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:15,type:e.WALL_RIGHT_TOP},{src:14,type:e.WALL_RIGHT_BOTTOM},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_CENTER},{src:1,type:e.FLOOR},{src:18,type:e.CLIFF_LEFT}],[{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_CENTER},{src:null,type:null},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_CENTER},{src:20,type:e.WALL_LEFT_BOTTOM},{src:17,type:e.CLIFF_CENTER}],[{src:15,type:e.WALL_RIGHT_TOP},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:14,type:e.WALL_RIGHT_BOTTOM},{src:19,type:e.CLIFF_RIGHT}]],r={x:2,y:11,direction:O.TOP,state:y.IDLE,type:s.PLAYER},p=[{x:1,y:1,direction:O.BOTTOM,state:y.IDLE,type:s.SKELETON_WOODEN},{x:2,y:7,direction:O.BOTTOM,state:y.IDLE,type:s.SKELETON_WOODEN}],T=[{x:1,y:3,type:s.SPIKES_THREE,count:0},{x:3,y:6,type:s.SPIKES_ONE,count:0},{x:2,y:9,type:s.SPIKES_TWO,count:0}],_=[{x:3,y:1,state:y.IDLE,type:s.BURST,direction:O.TOP},{x:3,y:4,state:y.IDLE,type:s.BURST,direction:O.TOP},{x:3,y:5,state:y.IDLE,type:s.BURST,direction:O.TOP},{x:2,y:10,state:y.IDLE,type:s.BURST,direction:O.TOP},{x:3,y:10,state:y.IDLE,type:s.BURST,direction:O.TOP}],E={x:0,y:1,direction:O.LEFT,state:y.IDLE,type:s.DOOR};t("default",{mapInfo:c,player:r,enemies:p,spikes:T,bursts:_,door:E});L._RF.pop()}}}));

System.register("chunks:///_virtual/BlockRightSubStateMachine.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./index3.ts","./DirectionSubStateMachine.ts","./State.ts"],(function(t){"use strict";var e,n,i,s,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){i=t.DIRECTION_ENUM},function(t){s=t.default},function(t){c=t.default}],execute:function(){n._RF.push({},"e1304HBmZlEpYNIfnXg25+h","BlockRightSubStateMachine",void 0);var a="texture/player/blockright";t("default",function(t){function n(e){var n;return(n=t.call(this,e)||this).stateMachines.set(i.TOP,new c(e,a+"/top")),n.stateMachines.set(i.BOTTOM,new c(e,a+"/bottom")),n.stateMachines.set(i.LEFT,new c(e,a+"/left")),n.stateMachines.set(i.RIGHT,new c(e,a+"/right")),n}return e(n,t),n}(s));n._RF.pop()}}}));

System.register("chunks:///_virtual/StartManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./index3.ts","./FaderManager.ts"],(function(t){"use strict";var e,n,r,a,o,c,s,u,i;return{setters:[function(t){e=t.inheritsLoose,n=t.asyncToGenerator},function(t){r=t.cclegacy,a=t._decorator,o=t.director,c=t.Node,s=t.Component},function(t){u=t.SCENE_ENUM},function(t){i=t.default}],execute:function(){var f;r._RF.push({},"e1f034VD2tNOLeMgY7cspIy","StartManager",void 0);var p=a.ccclass;t("StartManager",p("StartManager")(f=function(t){function r(){return t.apply(this,arguments)||this}e(r,t);var a=r.prototype;return a.onLoad=function(){o.preloadScene(u.Battle),i.Instance.fadeOut(1e3),this.node.once(c.EventType.TOUCH_START,this.handleStart,this)},a.handleStart=function(){var t=n(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.Instance.fadeIn(300);case 2:o.loadScene(u.Battle);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),r}(s))||f);r._RF.pop()}}}));

System.register("chunks:///_virtual/BlockLeftSubStateMachine.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./index3.ts","./DirectionSubStateMachine.ts","./State.ts"],(function(t){"use strict";var e,n,s,c,i;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){s=t.DIRECTION_ENUM},function(t){c=t.default},function(t){i=t.default}],execute:function(){n._RF.push({},"e2027B1tkxI8oltfoWrP4FT","BlockLeftSubStateMachine",void 0);var a="texture/player/blockleft";t("default",function(t){function n(e){var n;return(n=t.call(this,e)||this).stateMachines.set(s.TOP,new i(e,a+"/top")),n.stateMachines.set(s.BOTTOM,new i(e,a+"/bottom")),n.stateMachines.set(s.LEFT,new i(e,a+"/left")),n.stateMachines.set(s.RIGHT,new i(e,a+"/right")),n}return e(n,t),n}(c));n._RF.pop()}}}));

System.register("chunks:///_virtual/ResourceManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Singleton.ts"],(function(e){"use strict";var n,t,r,o,c,u,i;return{setters:[function(e){n=e.inheritsLoose,t=e.createClass},function(e){r=e.cclegacy,o=e._decorator,c=e.resources,u=e.SpriteFrame},function(e){i=e.default}],execute:function(){var s;r._RF.push({},"e468adZ+jBHb4V6f+QJf3tC","ResourceManager",void 0);var a=o.ccclass;e("ResourceManager",a("ResourceManager")(s=function(e){function r(){return e.apply(this,arguments)||this}n(r,e);var o=r.prototype;return o.loadRes=function(e,n){return void 0===n&&(n=u),new Promise((function(t,r){c.load(e,n,(function(e,n){e?r(e):t(n)}))}))},o.loadDir=function(e,n){return void 0===n&&(n=u),new Promise((function(t,r){c.loadDir(e,n,(function(e,n){e?r(e):t(n)}))}))},t(r,null,[{key:"Instance",get:function(){return e.GetInstance.call(this)}}]),r}(i))||s);r._RF.pop()}}}));

System.register("chunks:///_virtual/AttackSubStateMachine2.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./index3.ts","./DirectionSubStateMachine.ts","./State.ts"],(function(t){"use strict";var e,n,s,a,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){s=t.DIRECTION_ENUM},function(t){a=t.default},function(t){c=t.default}],execute:function(){n._RF.push({},"e7a6egW87pAuZpp9ND5dAMp","AttackSubStateMachine",void 0);var i="texture/woodenskeleton/attack";t("default",function(t){function n(e){var n;return(n=t.call(this,e)||this).stateMachines.set(s.TOP,new c(e,i+"/top")),n.stateMachines.set(s.BOTTOM,new c(e,i+"/bottom")),n.stateMachines.set(s.LEFT,new c(e,i+"/left")),n.stateMachines.set(s.RIGHT,new c(e,i+"/right")),n}return e(n,t),n}(a));n._RF.pop()}}}));

System.register("chunks:///_virtual/TurnLeftSubStateMachine.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./index3.ts","./DirectionSubStateMachine.ts","./State.ts"],(function(t){"use strict";var e,n,s,i,u;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){s=t.DIRECTION_ENUM},function(t){i=t.default},function(t){u=t.default}],execute:function(){n._RF.push({},"e8831tv4YxNsrP4yymA60Fo","TurnLeftSubStateMachine",void 0);var a="texture/player/turnleft";t("default",function(t){function n(e){var n;return(n=t.call(this,e)||this).stateMachines.set(s.TOP,new u(e,a+"/top")),n.stateMachines.set(s.BOTTOM,new u(e,a+"/bottom")),n.stateMachines.set(s.LEFT,new u(e,a+"/left")),n.stateMachines.set(s.RIGHT,new u(e,a+"/right")),n}return e(n,t),n}(i));n._RF.pop()}}}));

System.register("chunks:///_virtual/ControllerManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./index3.ts","./EventManager.ts"],(function(t){"use strict";var n,e,r,o,a,c;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,r=t._decorator,o=t.Component},function(t){a=t.EVENT_ENUM},function(t){c=t.default}],execute:function(){var i;e._RF.push({},"ede2a0/UrtGk4YoVc9P7bIP","ControllerManager",void 0);var l=r.ccclass;r.property,t("ControllerManager",l("ControllerManager")(i=function(t){function e(){return t.apply(this,arguments)||this}return n(e,t),e.prototype.handleCtrl=function(t,n){c.Instance.emit(a.PLAYER_CTRL,n)},e}(o))||i);e._RF.pop()}}}));

System.register("chunks:///_virtual/level4.ts",["cc","./index3.ts"],(function(L){"use strict";var e,t,O,s,c;return{setters:[function(L){e=L.cclegacy},function(L){t=L.TILE_TYPE_ENUM,O=L.DIRECTION_ENUM,s=L.ENTITY_STATE_ENUM,c=L.ENTITY_TYPE_ENUM}],execute:function(){e._RF.push({},"ee92dV5n85IR5SVgTg5V2Vz","level4",void 0);var r=[[{src:16,type:t.WALL_LEFT_TOP},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:13,type:t.WALL_LEFT_BOTTOM},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:21,type:t.WALL_RIGHT_BOTTOM},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:15,type:t.WALL_RIGHT_TOP},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:23,type:t.WALL_LEFT_BOTTOM},{src:18,type:t.CLIFF_LEFT}],[{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER}],[{src:20,type:t.WALL_LEFT_BOTTOM},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER},{src:null,type:null},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:20,type:t.WALL_LEFT_BOTTOM},{src:17,type:t.CLIFF_CENTER}],[{src:15,type:t.WALL_RIGHT_TOP},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:14,type:t.WALL_RIGHT_BOTTOM},{src:19,type:t.CLIFF_RIGHT}]],p={x:2,y:7,direction:O.TOP,state:s.IDLE,type:c.PLAYER},y=[{x:1,y:3,direction:O.BOTTOM,state:s.IDLE,type:c.SKELETON_IRON}],T={x:2,y:0,direction:O.BOTTOM,state:s.IDLE,type:c.DOOR};L("default",{mapInfo:r,player:p,enemies:y,spikes:[],bursts:[],door:T});e._RF.pop()}}}));

System.register("chunks:///_virtual/DeathSubStateMachine5.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./index3.ts","./DirectionSubStateMachine.ts","./State.ts"],(function(t){"use strict";var e,n,s,i,a;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){s=t.DIRECTION_ENUM},function(t){i=t.default},function(t){a=t.default}],execute:function(){n._RF.push({},"f173edVKrBMZLAscPc5/OLo","DeathSubStateMachine",void 0);var c="texture/ironskeleton/death";t("default",function(t){function n(e){var n;return(n=t.call(this,e)||this).stateMachines.set(s.TOP,new a(e,c+"/top")),n.stateMachines.set(s.BOTTOM,new a(e,c+"/bottom")),n.stateMachines.set(s.LEFT,new a(e,c+"/left")),n.stateMachines.set(s.RIGHT,new a(e,c+"/right")),n}return e(n,t),n}(i));n._RF.pop()}}}));

System.register("chunks:///_virtual/index3.ts",["cc"],(function(E){"use strict";var T;return{setters:[function(E){T=E.cclegacy}],execute:function(){var O,R,_,L,N,I,S,A,U,K,C,P,M,F;E({CONTROLLER_ENUM:void 0,DIRECTION_ENUM:void 0,DIRECTION_ORDER_ENUM:void 0,ENTITY_STATE_ENUM:void 0,ENTITY_TYPE_ENUM:void 0,EVENT_ENUM:void 0,FSM_PARAM_TYPE_ENUM:void 0,PARAMS_NAME_ENUM:void 0,SCENE_ENUM:void 0,SHAKE_TYPE_ENUM:void 0,SPIKES_COUNT_ENUM:void 0,SPIKES_COUNT_MAP_NUMBER_ENUM:void 0,SPIKES_TYPE_MAP_TOTAL_COUNT_ENUM:void 0,TILE_TYPE_ENUM:void 0}),T._RF.push({},"f2183uqhS1OuJZyEGE629VU","index",void 0),function(E){E.WALL_ROW="WALL_ROW",E.WALL_COLUMN="WALL_COLUMN",E.WALL_LEFT_TOP="WALL_LEFT_TOP",E.WALL_RIGHT_TOP="WALL_RIGHT_TOP",E.WALL_LEFT_BOTTOM="WALL_LEFT_BOTTOM",E.WALL_RIGHT_BOTTOM="WALL_RIGHT_BOTTOM",E.CLIFF_LEFT="CLIFF_ROW_START",E.CLIFF_CENTER="CLIFF_ROW_CENTER",E.CLIFF_RIGHT="CLIFF_ROW_END",E.FLOOR="FLOOR"}(O||(O=E("TILE_TYPE_ENUM",{}))),function(E){E.PLAYER="PLAYER",E.SKELETON_WOODEN="SKELETON_WOODEN",E.SKELETON_IRON="SKELETON_IRON",E.SPIKES_ONE="SPIKES_ONE",E.SPIKES_TWO="SPIKES_TWO",E.SPIKES_THREE="SPIKES_THREE",E.SPIKES_FOUR="SPIKES_FOUR",E.BURST="BURST",E.DOOR="DOOR",E.SMOKE="SMOKE"}(R||(R=E("ENTITY_TYPE_ENUM",{}))),function(E){E.LEFT="LEFT",E.RIGHT="RIGHT",E.TOP="TOP",E.BOTTOM="BOTTOM"}(_||(_=E("DIRECTION_ENUM",{}))),function(E){E.LEFT="LEFT",E.RIGHT="RIGHT",E.TOP="TOP",E.BOTTOM="BOTTOM",E.TURNLEFT="TURNLEFT",E.TURNRIGHT="TURNRIGHT"}(L||(L=E("CONTROLLER_ENUM",{}))),function(E){E.IDLE="IDLE",E.ATTACK="ATTACK",E.TURNLEFT="TURNLEFT",E.TURNRIGHT="TURNRIGHT",E.BLOCKFRONT="BLOCKFRONT",E.BLOCKBACK="BLOCKBACK",E.BLOCKLEFT="BLOCKLEFT",E.BLOCKRIGHT="BLOCKRIGHT",E.BLOCKTURNLEFT="BLOCKTURNLEFT",E.BLOCKTURNRIGHT="BLOCKTURNRIGHT",E.DEATH="DEATH",E.AIRDEATH="AIRDEATH"}(N||(N=E("ENTITY_STATE_ENUM",{}))),function(E){E.PLAYER_CTRL="PLAYER_CTRL",E.PLAYER_MOVE_END="PLAYER_MOVE_END",E.ATTACK_ENEMY="ATTACK_ENEMY",E.ATTACK_PLAYER="ATTACK_PLAYER",E.RECORD_STEP="RECORD_STEP",E.REVOKE_STEP="REVOKE_STEP",E.SCREEN_SHAKE="SCREEN_SHAKE",E.NEXT_LEVEL="NEXT_LEVEL",E.RESTART_LEVEL="RESTART_LEVEL",E.OPENDOOR="OPENDOOR",E.GAME_START="GAME_START",E.GAME_OVER="GAME_OVER",E.DOOR_OPEN="DOOR_OPEN",E.SHOW_SMOKE="SHOW_SMOKE",E.PLAYER_BORN="PLAYER_BORN",E.QUIT_BATTLE="QUIT_BATTLE"}(I||(I=E("EVENT_ENUM",{}))),function(E){E.NUMBER="NUMBER",E.TRIGGER="TRIGGER"}(S||(S=E("FSM_PARAM_TYPE_ENUM",{}))),function(E){E[E.TOP=0]="TOP",E[E.BOTTOM=1]="BOTTOM",E[E.LEFT=2]="LEFT",E[E.RIGHT=3]="RIGHT"}(A||(A=E("DIRECTION_ORDER_ENUM",{}))),function(E){E[E.SPIKES_ONE=2]="SPIKES_ONE",E[E.SPIKES_TWO=3]="SPIKES_TWO",E[E.SPIKES_THREE=4]="SPIKES_THREE",E[E.SPIKES_FOUR=5]="SPIKES_FOUR"}(U||(U=E("SPIKES_TYPE_MAP_TOTAL_COUNT_ENUM",{}))),function(E){E.ZERO="ZERO",E.ONE="ONE",E.TWO="TWO",E.THREE="THREE",E.FOUR="FOUR",E.FIVE="FIVE"}(K||(K=E("SPIKES_COUNT_ENUM",{}))),function(E){E[E.ZERO=0]="ZERO",E[E.ONE=1]="ONE",E[E.TWO=2]="TWO",E[E.THREE=3]="THREE",E[E.FOUR=4]="FOUR",E[E.FIVE=5]="FIVE"}(C||(C=E("SPIKES_COUNT_MAP_NUMBER_ENUM",{}))),function(E){E.IDLE="IDLE",E.ATTACK="ATTACK",E.TURNLEFT="TURNLEFT",E.TURNRIGHT="TURNRIGHT",E.BLOCKFRONT="BLOCKFRONT",E.BLOCKBACK="BLOCKBACK",E.BLOCKLEFT="BLOCKLEFT",E.BLOCKRIGHT="BLOCKRIGHT",E.BLOCKTURNLEFT="BLOCKTURNLEFT",E.BLOCKTURNRIGHT="BLOCKTURNRIGHT",E.DEATH="DEATH",E.AIRDEATH="AIRDEATH",E.DIRECTION="DIRECTION",E.SPIKES_TOTAL_COUNT="SPIKES_TOTAL_COUNT",E.SPIKES_CUR_COUNT="SPIKES_CUR_COUNT"}(P||(P=E("PARAMS_NAME_ENUM",{}))),function(E){E.TOP="TOP",E.BOTTOM="BOTTOM",E.LEFT="LEFT",E.RIGHT="RIGHT"}(M||(M=E("SHAKE_TYPE_ENUM",{}))),function(E){E.Loading="Loading",E.Start="Start",E.Battle="Battle"}(F||(F=E("SCENE_ENUM",{}))),T._RF.pop()}}}));

System.register("chunks:///_virtual/IdleSubStateMachine5.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./index3.ts","./DirectionSubStateMachine.ts","./State.ts"],(function(t){"use strict";var e,n,a,i,s,o,r;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,a=t.AnimationClip},function(t){i=t.DIRECTION_ENUM},function(t){s=t.default},function(t){o=t.default,r=t.ANIMATION_SPEED}],execute:function(){n._RF.push({},"f2860nev4VKObYhkfI39Vpv","IdleSubStateMachine",void 0);var c="texture/smoke/idle";t("default",function(t){function n(e){var n;return(n=t.call(this,e)||this).stateMachines.set(i.TOP,new o(e,c+"/top",a.WrapMode.Normal,r/1.5)),n.stateMachines.set(i.BOTTOM,new o(e,c+"/bottom",a.WrapMode.Normal,r/1.5)),n.stateMachines.set(i.LEFT,new o(e,c+"/left",a.WrapMode.Normal,r/1.5)),n.stateMachines.set(i.RIGHT,new o(e,c+"/right",a.WrapMode.Normal,r/1.5)),n}return e(n,t),n}(s));n._RF.pop()}}}));

System.register("chunks:///_virtual/SpikesStateMachine.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./index3.ts","./StateMachine.ts","./SpikesFourSubStateMachine.ts","./SpikesOneSubStateMachine.ts","./SpikesThreeSubStateMachine.ts","./SpikesTwoSubStateMachine.ts","./SpikesManager.ts"],(function(t){"use strict";var e,i,n,s,a,S,r,c,h,u,o,E,_,p,f;return{setters:[function(t){e=t.inheritsLoose,i=t.asyncToGenerator},function(t){n=t.cclegacy,s=t._decorator,a=t.Animation},function(t){S=t.PARAMS_NAME_ENUM,r=t.SPIKES_TYPE_MAP_TOTAL_COUNT_ENUM,c=t.ENTITY_TYPE_ENUM},function(t){h=t.getInitParamsNumber,u=t.default},function(t){o=t.default},function(t){E=t.default},function(t){_=t.default},function(t){p=t.default},function(t){f=t.default}],execute:function(){var P;n._RF.push({},"f41d5wj7o9DuJfAZ4w7iIfV","SpikesStateMachine",void 0);var M=s.ccclass;t("SpikesStateMachine",M("SpikesStateMachine")(P=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var s=n.prototype;return s.init=function(){var t=i(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.animationComponent=this.node.addComponent(a),this.initParams(),this.initStateMachines(),this.initAnimationEvent(),t.next=6,Promise.all(this.waitingList);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.initAnimationEvent=function(){var t=this;this.animationComponent.on(a.EventType.FINISHED,(function(){var e=t.animationComponent.defaultClip.name,i=t.params.get(S.SPIKES_TOTAL_COUNT).value;(i===r.SPIKES_ONE&&e.includes("spikesone/two")||i===r.SPIKES_TWO&&e.includes("spikestwo/three")||i===r.SPIKES_THREE&&e.includes("spikesthree/four")||i===r.SPIKES_FOUR&&e.includes("spikesfour/five"))&&t.node.getComponent(f).backZero()}))},s.initParams=function(){this.params.set(S.SPIKES_TOTAL_COUNT,h()),this.params.set(S.SPIKES_CUR_COUNT,h())},s.initStateMachines=function(){this.stateMachines.set(c.SPIKES_ONE,new E(this)),this.stateMachines.set(c.SPIKES_TWO,new p(this)),this.stateMachines.set(c.SPIKES_THREE,new _(this)),this.stateMachines.set(c.SPIKES_FOUR,new o(this))},s.run=function(){var t=this.params.get(S.SPIKES_TOTAL_COUNT).value;switch(this.currentState){case this.stateMachines.get(c.SPIKES_ONE):case this.stateMachines.get(c.SPIKES_TWO):case this.stateMachines.get(c.SPIKES_THREE):case this.stateMachines.get(c.SPIKES_FOUR):t===r.SPIKES_ONE?this.currentState=this.stateMachines.get(c.SPIKES_ONE):t===r.SPIKES_TWO?this.currentState=this.stateMachines.get(c.SPIKES_TWO):t===r.SPIKES_THREE?this.currentState=this.stateMachines.get(c.SPIKES_THREE):t===r.SPIKES_FOUR?this.currentState=this.stateMachines.get(c.SPIKES_FOUR):this.currentState=this.currentState;break;default:this.currentState=this.stateMachines.get(c.SPIKES_ONE)}},n}(u))||P);n._RF.pop()}}}));

System.register("chunks:///_virtual/level10.ts",["cc","./index3.ts"],(function(L){"use strict";var t,e,O,s,c;return{setters:[function(L){t=L.cclegacy},function(L){e=L.TILE_TYPE_ENUM,O=L.DIRECTION_ENUM,s=L.ENTITY_STATE_ENUM,c=L.ENTITY_TYPE_ENUM}],execute:function(){t._RF.push({},"f5be1zYSeRBe4AIBdk2tSBq","level10",void 0);var r=[[{src:16,type:e.WALL_LEFT_TOP},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:25,type:e.WALL_LEFT_TOP},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:23,type:e.WALL_LEFT_BOTTOM},{src:18,type:e.CLIFF_LEFT}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:21,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_CENTER},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_CENTER},{src:20,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:24,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:null,type:null},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_CENTER},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:20,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:21,type:e.WALL_RIGHT_TOP},{src:1,type:e.FLOOR},{src:15,type:e.WALL_RIGHT_TOP},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:14,type:e.WALL_RIGHT_BOTTOM},{src:19,type:e.CLIFF_RIGHT}]],y={x:1,y:7,direction:O.TOP,state:s.IDLE,type:c.PLAYER},p=[{x:1,y:3,direction:O.BOTTOM,state:s.IDLE,type:c.SKELETON_WOODEN},{x:2,y:4,direction:O.BOTTOM,state:s.IDLE,type:c.SKELETON_IRON},{x:5,y:5,direction:O.LEFT,state:s.IDLE,type:c.SKELETON_WOODEN}],R=[{x:4,y:3,type:c.SPIKES_THREE,count:0}],_=[{x:3,y:4,state:s.IDLE,type:c.BURST,direction:O.TOP},{x:3,y:5,state:s.IDLE,type:c.BURST,direction:O.TOP}],E={x:6,y:1,direction:O.LEFT,state:s.IDLE,type:c.DOOR};L("default",{mapInfo:r,player:y,enemies:p,spikes:R,bursts:_,door:E});t._RF.pop()}}}));

System.register("chunks:///_virtual/FaderManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Singleton.ts","./index.ts","./DrawManager.ts"],(function(e){"use strict";var t,r,n,a,i,o,u,s,c,f,d,p;return{setters:[function(e){t=e.inheritsLoose,r=e.createClass,n=e.defineProperty,a=e.assertThisInitialized,i=e.asyncToGenerator},function(e){o=e.cclegacy,u=e.RenderRoot2D,s=e.game},function(e){c=e.default},function(e){f=e.createUINode},function(e){d=e.DrawManager,p=e.DEFAULT_FADE_DURATION}],execute:function(){o._RF.push({},"f5d20SoAJZJJpE1kryv0A5H","FaderManager",void 0);e("default",function(e){function o(){for(var t,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,n(a(t),"_fader",null),t}t(o,e);var c=o.prototype;return c.fadeIn=function(){var e=i(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t=p),e.next=3,this.fader.fadeIn(t);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),c.fadeOut=function(){var e=i(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t=p),e.next=3,this.fader.fadeOut(t);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),c.mask=function(){var e=i(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fader.mask();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r(o,[{key:"fader",get:function(){if(null!==this._fader)return this._fader;var e=f();e.addComponent(u);var t=f();return t.setParent(e),this._fader=t.addComponent(d),this._fader.init(),s.addPersistRootNode(e),this._fader}}],[{key:"Instance",get:function(){return e.GetInstance.call(this)}}]),o}(c));o._RF.pop()}}}));

System.register("chunks:///_virtual/level18.ts",["cc","./index3.ts"],(function(t){"use strict";var L,e,c,s,y;return{setters:[function(t){L=t.cclegacy},function(t){e=t.TILE_TYPE_ENUM,c=t.DIRECTION_ENUM,s=t.ENTITY_STATE_ENUM,y=t.ENTITY_TYPE_ENUM}],execute:function(){L._RF.push({},"f83178SB4FL77ZDBkdRBC3Z","level18",void 0);var r=[[{src:16,type:e.WALL_LEFT_TOP},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:13,type:e.WALL_LEFT_BOTTOM},{src:18,type:e.CLIFF_LEFT}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_CENTER},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:1,type:e.FLOOR},{src:16,type:e.WALL_LEFT_TOP},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:13,type:e.WALL_LEFT_BOTTOM},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_CENTER},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:15,type:e.WALL_RIGHT_TOP},{src:13,type:e.WALL_LEFT_BOTTOM},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:21,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:22,type:e.WALL_COLUMN},{src:14,type:e.WALL_RIGHT_BOTTOM},{src:19,type:e.CLIFF_RIGHT}],[{src:null,type:null},{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:null,type:null},{src:21,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:21,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null}]],p={x:3,y:8,direction:c.LEFT,state:s.IDLE,type:y.PLAYER},l=[{x:1,y:1,direction:c.BOTTOM,state:s.IDLE,type:y.SKELETON_WOODEN},{x:3,y:2,direction:c.BOTTOM,state:s.IDLE,type:y.SKELETON_WOODEN}],O=[{x:1,y:4,type:y.SPIKES_TWO,count:0},{x:1,y:6,type:y.SPIKES_TWO,count:0},{x:1,y:8,type:y.SPIKES_FOUR,count:0}],_=[{x:1,y:5,state:s.IDLE,type:y.BURST,direction:c.TOP},{x:2,y:9,state:s.IDLE,type:y.BURST,direction:c.TOP}],n={x:5,y:2,direction:c.LEFT,state:s.IDLE,type:y.DOOR};t("default",{mapInfo:r,player:p,enemies:l,spikes:O,bursts:_,door:n});L._RF.pop()}}}));

System.register("chunks:///_virtual/EntityManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./index3.ts","./TileManager.ts","./index.ts"],(function(t){"use strict";var i,n,e,s,o,r,a,c,d,u,f,h,y,_;return{setters:[function(t){i=t.inheritsLoose,n=t.defineProperty,e=t.assertThisInitialized,s=t.createClass},function(t){o=t.cclegacy,r=t._decorator,a=t.Sprite,c=t.UITransform,d=t.Component},function(t){u=t.PARAMS_NAME_ENUM,f=t.DIRECTION_ORDER_ENUM},function(t){h=t.TILE_WIDTH,y=t.TILE_HEIGHT},function(t){_=t.randomByLength}],execute:function(){var p;o._RF.push({},"f8eedd9+RNKF7Ym80b7VpSj","EntityManager",void 0);var l=r.ccclass;t("EntityManager",l("EntityManager")(p=function(t){function o(){for(var i,s=arguments.length,o=new Array(s),r=0;r<s;r++)o[r]=arguments[r];return i=t.call.apply(t,[this].concat(o))||this,n(e(i),"id",_(12)),n(e(i),"fsm",void 0),n(e(i),"transform",void 0),n(e(i),"_state",void 0),n(e(i),"_direction",void 0),n(e(i),"type",void 0),n(e(i),"x",void 0),n(e(i),"y",void 0),i}i(o,t);var r=o.prototype;return r.init=function(t){this.node.addComponent(a).sizeMode=a.SizeMode.CUSTOM,this.transform=this.getComponent(c),this.transform.setContentSize(4*h,4*y),this.x=t.x,this.y=t.y,this.direction=t.direction,this.state=t.state},r.onDestroy=function(){},r.update=function(){this.node.setPosition(this.x*h-1.5*h,-this.y*y+1.5*y)},s(o,[{key:"direction",get:function(){return this._direction},set:function(t){this._direction=t,this.fsm.setParams(u.DIRECTION,f[this._direction])}},{key:"state",get:function(){return this._state},set:function(t){this._state=t,this.fsm.setParams(t,!0)}}]),o}(d))||p);o._RF.pop()}}}));

System.register("chunks:///_virtual/level14.ts",["cc","./index3.ts"],(function(t){"use strict";var L,e,O,s,y;return{setters:[function(t){L=t.cclegacy},function(t){e=t.TILE_TYPE_ENUM,O=t.DIRECTION_ENUM,s=t.ENTITY_STATE_ENUM,y=t.ENTITY_TYPE_ENUM}],execute:function(){L._RF.push({},"f962bItAA1LAIUn5msiNsMJ","level14",void 0);var c=[[{src:22,type:e.WALL_LEFT_TOP},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:13,type:e.WALL_LEFT_BOTTOM},{src:18,type:e.CLIFF_LEFT}],[{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_CENTER},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:20,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:19,type:e.CLIFF_RIGHT}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_CENTER},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:19,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_RIGHT},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_RIGHT},{src:9,type:e.WALL_ROW},{src:19,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:19,type:e.CLIFF_CENTER}],[{src:27,type:e.WALL_ROW},{src:5,type:e.WALL_COLUMN},{src:23,type:e.WALL_RIGHT_BOTTOM},{src:19,type:e.CLIFF_CENTER},{src:null,type:null},{src:9,type:e.WALL_ROW},{src:19,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_CENTER},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:19,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:16,type:e.WALL_LEFT_TOP},{src:5,type:e.WALL_COLUMN},{src:14,type:e.WALL_RIGHT_BOTTOM},{src:19,type:e.CLIFF_CENTER}],[{src:21,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:22,type:e.WALL_RIGHT_TOP},{src:14,type:e.WALL_RIGHT_BOTTOM},{src:17,type:e.CLIFF_CENTER},{src:null,type:null},{src:null,type:null}]],r={x:1,y:0,direction:O.BOTTOM,state:s.IDLE,type:y.PLAYER},p=[{x:3,y:4,direction:O.TOP,state:s.IDLE,type:y.SKELETON_WOODEN},{x:8,y:3,direction:O.LEFT,state:s.IDLE,type:y.SKELETON_WOODEN}],R=[{x:3,y:2,type:y.SPIKES_TWO,count:0}],F=[{x:1,y:4,state:s.IDLE,type:y.BURST,direction:O.TOP},{x:5,y:2,state:s.IDLE,type:y.BURST,direction:O.TOP},{x:5,y:4,state:s.IDLE,type:y.BURST,direction:O.TOP},{x:7,y:3,state:s.IDLE,type:y.BURST,direction:O.TOP},{x:7,y:4,state:s.IDLE,type:y.BURST,direction:O.TOP},{x:8,y:2,state:s.IDLE,type:y.BURST,direction:O.TOP}],_={x:10,y:1,direction:O.LEFT,state:s.IDLE,type:y.DOOR};t("default",{mapInfo:c,player:r,enemies:p,spikes:R,bursts:F,door:_});L._RF.pop()}}}));

System.register("chunks:///_virtual/TileMapManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./DataManager.ts","./TileManager.ts","./index.ts","./ResourceManager.ts"],(function(e){"use strict";var n,t,r,a,i,c,o,s,u,l;return{setters:[function(e){n=e.inheritsLoose,t=e.asyncToGenerator},function(e){r=e.cclegacy,a=e._decorator,i=e.Component},function(e){c=e.default},function(e){o=e.TileManager},function(e){s=e.randomByRange,u=e.createUINode},function(e){l=e.ResourceManager}],execute:function(){var f;r._RF.push({},"f9917jX+zdHIbvW8s3LWI1Z","TileMapManager",void 0);var p=a.ccclass;e("TileMapManager",p("TileMapManager")(f=function(e){function r(){return e.apply(this,arguments)||this}return n(r,e),r.prototype.init=function(){var e=t(regeneratorRuntime.mark((function e(){var n,t,r,a,i,f,p=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.Instance.mapInfo,c.Instance.tileInfo=[],e.next=4,l.Instance.loadDir("texture/tile/tile/");case 4:t=e.sent,r=0;case 6:if(!(r<n.length)){e.next=21;break}a=n[r],c.Instance.tileInfo[r]=[],i=function(e){var n=a[e];if(null===n.src||null===n.type)return"continue";var i=n.src;(1===i&&r%2==0&&e%2==1||5===i&&r%2==0&&e%2==1||9===i&&r%2==0&&e%2==1)&&(i+=s(0,4));var l="tile ("+i+")",f=t.find((function(e){return e.name===l}))||t[0],g=n.type,d=u(),M=d.addComponent(o);M.init(g,f,r,e),d.setParent(p.node),c.Instance.tileInfo[r][e]=M},f=0;case 11:if(!(f<a.length)){e.next=18;break}if("continue"!==i(f)){e.next=15;break}return e.abrupt("continue",15);case 15:f++,e.next=11;break;case 18:r++,e.next=6;break;case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),r}(i))||f);r._RF.pop()}}}));

System.register("chunks:///_virtual/WoodenSkeletonStateMachine.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./index3.ts","./EntityManager.ts","./StateMachine.ts","./IdleSubStateMachine.ts","./AttackSubStateMachine2.ts","./DeathSubStateMachine3.ts"],(function(t){"use strict";var e,n,i,a,s,r,c,o,h,u,f,m,l,p;return{setters:[function(t){e=t.inheritsLoose,n=t.asyncToGenerator},function(t){i=t.cclegacy,a=t._decorator,s=t.Animation},function(t){r=t.ENTITY_STATE_ENUM,c=t.PARAMS_NAME_ENUM},function(t){o=t.EntityManager},function(t){h=t.getInitParamsTrigger,u=t.getInitParamsNumber,f=t.default},function(t){m=t.default},function(t){l=t.default},function(t){p=t.default}],execute:function(){var S;i._RF.push({},"fe448NKl0dLP5XbtdE+pRER","WoodenSkeletonStateMachine",void 0);var M=a.ccclass;t("WoodenSkeletonStateMachine",M("WoodenSkeletonStateMachine")(S=function(t){function i(){return t.apply(this,arguments)||this}e(i,t);var a=i.prototype;return a.init=function(){var t=n(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.animationComponent=this.node.addComponent(s),this.initParams(),this.initStateMachines(),this.initAnimationEvent(),t.next=6,Promise.all(this.waitingList);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),a.initAnimationEvent=function(){var t=this;this.animationComponent.on(s.EventType.FINISHED,(function(){var e=t.animationComponent.defaultClip.name;["attack"].some((function(t){return e.includes(t)}))&&(t.node.getComponent(o).state=r.IDLE)}))},a.initParams=function(){this.params.set(c.IDLE,h()),this.params.set(c.ATTACK,h()),this.params.set(c.DEATH,h()),this.params.set(c.DIRECTION,u())},a.initStateMachines=function(){this.stateMachines.set(c.IDLE,new m(this)),this.stateMachines.set(c.ATTACK,new l(this)),this.stateMachines.set(c.DEATH,new p(this))},a.run=function(){switch(this.currentState){case this.stateMachines.get(c.IDLE):case this.stateMachines.get(c.ATTACK):case this.stateMachines.get(c.DEATH):this.params.get(c.DEATH).value?this.currentState=this.stateMachines.get(c.DEATH):this.params.get(c.ATTACK).value?this.currentState=this.stateMachines.get(c.ATTACK):this.params.get(c.IDLE).value?this.currentState=this.stateMachines.get(c.IDLE):this.currentState=this.currentState;break;default:this.currentState=this.stateMachines.get(c.IDLE)}},i}(f))||S);i._RF.pop()}}}));

System.register("chunks:///_virtual/level7.ts",["cc","./index3.ts"],(function(L){"use strict";var O,t,e,c,s;return{setters:[function(L){O=L.cclegacy},function(L){t=L.TILE_TYPE_ENUM,e=L.DIRECTION_ENUM,c=L.ENTITY_STATE_ENUM,s=L.ENTITY_TYPE_ENUM}],execute:function(){O._RF.push({},"ff7fa72Us9OT4yONX5ROcEx","level7",void 0);var y=[[{src:16,type:t.WALL_LEFT_TOP},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:13,type:t.WALL_LEFT_BOTTOM},{src:18,type:t.CLIFF_LEFT}],[{src:21,type:t.WALL_RIGHT_BOTTOM},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:21,type:t.WALL_RIGHT_BOTTOM},{src:17,type:t.CLIFF_CENTER}],[{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER}],[{src:20,type:t.WALL_LEFT_BOTTOM},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:20,type:t.WALL_LEFT_BOTTOM},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:15,type:t.WALL_RIGHT_TOP},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:14,type:t.WALL_RIGHT_BOTTOM},{src:19,type:t.CLIFF_RIGHT}]],r={x:2,y:7,direction:e.TOP,state:c.IDLE,type:s.PLAYER},p=[{x:2,y:2,direction:e.BOTTOM,state:c.IDLE,type:s.SKELETON_WOODEN}],_=[{x:1,y:4,type:s.SPIKES_ONE,count:0},{x:2,y:4,type:s.SPIKES_TWO,count:0},{x:3,y:4,type:s.SPIKES_TWO,count:0},{x:4,y:4,type:s.SPIKES_THREE,count:0}],T={x:2,y:0,direction:e.BOTTOM,state:c.IDLE,type:s.DOOR};L("default",{mapInfo:y,player:r,enemies:p,spikes:_,bursts:[],door:T});O._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./index3.ts","./Singleton.ts","./DataManager.ts","./EventManager.ts","./TileManager.ts","./index.ts","./EntityManager.ts","./EnemyManager.ts","./StateMachine.ts","./SubStateMachine.ts","./DirectionSubStateMachine.ts","./ResourceManager.ts","./State.ts","./DeathSubStateMachine5.ts","./IdleSubStateMachine3.ts","./IronSkeletonStateMachine.ts","./IronSkeletonManager.ts","./SpikesSubStateMachine.ts","./IdleSubStateMachine.ts","./DrawManager.ts","./level1.ts","./level5.ts","./level2.ts","./level3.ts","./level4.ts","./level6.ts","./level7.ts","./level8.ts","./level9.ts","./level10.ts","./level11.ts","./level12.ts","./level13.ts","./level14.ts","./level15.ts","./level16.ts","./level17.ts","./level18.ts","./level19.ts","./level20.ts","./level21.ts","./index2.ts","./AttackSubStateMachine2.ts","./DeathSubStateMachine3.ts","./WoodenSkeletonStateMachine.ts","./WoodenSkeletonManager.ts","./IdleSubStateMachine2.ts","./AttackSubStateMachine.ts","./TurnRightSubStateMachine.ts","./TurnLeftSubStateMachine.ts","./DeathSubStateMachine2.ts","./AirDeathSubStateMachine.ts","./BlockFrontSubStateMachine.ts","./BlockRightSubStateMachine.ts","./BlockTurnLeftSubStateMachine.ts","./BlockBackSubStateMachine.ts","./BlockTurnRightSubStateMachine.ts","./BlockLeftSubStateMachine.ts","./PlayerStateMachine.ts","./PlayerManager.ts","./TileMapManager.ts","./DeathSubStateMachine.ts","./IdleSubStateMachine4.ts","./DoorStateMachine.ts","./DoorManager.ts","./BurstStateMachine.ts","./BurstManager.ts","./SpikesFourSubStateMachine.ts","./SpikesOneSubStateMachine.ts","./SpikesThreeSubStateMachine.ts","./SpikesTwoSubStateMachine.ts","./SpikesStateMachine.ts","./SpikesManager.ts","./FaderManager.ts","./DeathSubStateMachine4.ts","./IdleSubStateMachine5.ts","./SmokeStateMachine.ts","./SmokeManager.ts","./ShakeManager.ts","./BattleManager.ts","./MenuManager.ts","./LoadingManager.ts","./StartManager.ts","./ControllerManager.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});